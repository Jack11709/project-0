"use strict";$(function(){function e(){f?(S=$(".track1.player").index(),console.log(S),S>=21&&($(".feedback").addClass("hide"),y.addClass("player"),y.addClass("winner"),$(".controller").addClass("hide"),$(".playerOneWin").removeClass("hide"),$(".reset").removeClass("hide"),$(".resultBox").removeClass("hide"))):f||(S=$(".track2.player").index(),console.log(S),S>=21&&($(".feedback").addClass("hide"),u.addClass("player"),u.addClass("winner"),$(".controller").addClass("hide"),$(".playerTwoWin").removeClass("hide"),$(".reset").removeClass("hide"),$(".resultBox").removeClass("hide")))}function a(){f?(s(),f=!1,k=$(".track2"),c.text("Player 2's Turn")):f||(s(),f=!0,k=$(".track1"),c.text("Player 1's Turn"))}function s(){f?(S=$(".track1.player").index(),x>0?l():0===x&&(r(),x=2)):f||(S=$(".track2.player").index(),b>0?l():0===b&&(r(),b=2))}function l(){k.eq(S).removeClass("player"),k.eq(S+(Math.floor(3*Math.random())+1)).addClass("player"),e()}function r(){k.eq(S).removeClass("player"),k.eq(S+5).addClass("player"),e()}function o(){0===P?(P=2,f=!0,S=$(".track1.player").index(),c.text("Player 2 has been salted! Player 1 moves again!"),l()):0===w&&(w=2,c.text("Player 1 has been salted! Player 2 moves again!"),S=$(".track2.player").index(),l())}var d=$(".start"),n=$(".move"),t=$(".boost"),i=$(".salt"),c=$(".turn"),y=$(".finish1"),u=$(".finish2"),p=$(".theme")[0];p.src="sounds/closing_theme.mp3";var C=$(".boostSound")[0];C.src="sounds/boost_sound.mp3";var h=$(".saltSound")[0];h.src="sounds/salt_sound.mp3";var m=$(".moveSound")[0];m.src="sounds/move_sound.mp3";var v=$(".errorSound")[0];v.src="sounds/error_sound.mp3";var k=$(".track1"),f=!0,x=1,b=1,P=1,w=1,S=null;n.on("click",function(){m.play(),a()}),t.on("click",function(){f?1===x?(C.play(),x=0,a()):2===x&&(v.play(),c.text("Player 1 boost already used!")):f||(1===b?(C.play(),b=0,a()):2===b&&(v.play(),c.text("Player 2 boost already used!")))}),i.on("click",function(){f?1===P?(h.play(),P=0,o()):2===P&&(v.play(),c.text("Player 1 has already used Salt!")):f||(1===w?(h.play(),w=0,o()):2===w&&(v.play(),c.text("Player 2 has already used Salt!")))}),d.on("click",function(){$(".instructions").addClass("hide"),$(".board").removeClass("hide"),$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),p.play()}),$(".reset").on("click",function(){$(".track1").removeClass("player winner"),$(".start1").addClass("player"),x=1,P=1,$(".track2").removeClass("player winner"),$(".start2").addClass("player"),b=1,w=1,$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),$(".resultBox").addClass("hide"),$(".playerOneWin").addClass("hide"),$(".playerTwoWin").addClass("hide")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY2hlY2tXaW5uZXIiLCJwbGF5ZXJPbmVUdXJuIiwiaW5kZXgiLCJjb25zb2xlIiwiYWRkQ2xhc3MiLCIkZmluaXNoMSIsInJlbW92ZUNsYXNzIiwibG9nIiwiJGZpbmlzaDIiLCJkZXRlcm1pbmVUdXJuIiwibG9jYXRlR2FyeSIsIiR0dXJuVGV4dCIsIlBsYXllck9uZUJvb3N0UmVtYWluaW5nIiwibW92ZUdhcnkiLCJQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyIsIiR0cmFjayIsImVxIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYm9vc3RHYXJ5Iiwic2FsdEdhcnkiLCJQbGF5ZXJPbmVTYWx0UmVtYWluaW5nIiwiUGxheWVyVHdvU2FsdFJlbWFpbmluZyIsIiRzdGFydCIsIiRtb3ZlIiwiJGJvb3N0IiwiJHNhbHQiLCIkYXVkaW9UaGVtZSIsInNyYyIsIiRib29zdFNvdW5kIiwiJHNhbHRTb3VuZCIsIiRtb3ZlU291bmQiLCIkZXJyb3JTb3VuZCIsIm9uIiwicGxheSJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0E4QkEsUUFBU0MsS0FEVEMsR0FDQUMsRUFBU0YsRUFBQUEsa0JBQWFFLFFBQ3BCQyxRQUFHRixJQUFBQSxHQUNEQyxHQUFVLEtBQ1ZDLEVBQUFBLGFBQUFDLFNBQUEsUUFDQUMsRUFBR0gsU0FBWSxVQUNiSCxFQUFFSyxTQUFhQSxVQUNmQyxFQUFBQSxlQUFBRCxTQUFBLFFBQ0FDLEVBQUFBLGlCQUFrQkMsWUFBbEIsUUFDQVAsRUFBRSxVQUFBTyxZQUFlRixRQUNqQkwsRUFBRSxjQUFBTyxZQUFpQkEsVUFFakJMLElBQ0hDLEVBQUFILEVBQUEsa0JBQUFHLFFBWEhDLFFBWU9JLElBQUlOLEdBQ1RDLEdBQVUsS0FDVkMsRUFBQUEsYUFBQUMsU0FBQSxRQUNBSSxFQUFHTixTQUFZLFVBQ2JILEVBQUVLLFNBQWFBLFVBQ2ZJLEVBQUFBLGVBQUFKLFNBQUEsUUFDQUksRUFBQUEsaUJBQWtCRixZQUFs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bUMsR0FBQSxRQUFBLFdBR0VuQyxFQUFFLFdBQVdPLFlBQVksaUJBRHpCUCxFQUFBLFdBQWFLLFNBQVEsVUFDckJMLEVBQXlCLEVBQ3pCQSxFQUFzQixFQUN0QmEsRUFBQUEsV0FBQUEsWUFBQUEsaUJBQ0FVLEVBQUFBLFdBQUFBLFNBQUFBLFVBQ0F2QixFQUF5QixFQUN6QkEsRUFBc0IsRUFDdEJlLEVBQUFBLGVBQUFBLFlBQUEsUUFDQVMsRUFBQUEsYUFBQUEsWUFBQSxRQUNBeEIsRUFBRSxjQUFGSyxTQUFpQkUsUUFDakJQLEVBQUUsaUJBQWFPLFNBQVksUUFDM0JQLEVBQUUsaUJBQWNLLFNBQVMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIC8vIExpc3Qgb2YgdmFyaWFibGVzIG5lZWRlZCBmb3IgdGhlIGdhbWVcbiAgY29uc3QgJHN0YXJ0ID0gJCgnLnN0YXJ0Jyk7XG4gIGNvbnN0ICRtb3ZlID0gJCgnLm1vdmUnKTtcbiAgY29uc3QgJGJvb3N0ID0gJCgnLmJvb3N0Jyk7XG4gIGNvbnN0ICRzYWx0ID0gJCgnLnNhbHQnKTtcbiAgY29uc3QgJHR1cm5UZXh0ID0gJCgnLnR1cm4nKTtcbiAgY29uc3QgJGZpbmlzaDEgPSAkKCcuZmluaXNoMScpO1xuICBjb25zdCAkZmluaXNoMiA9ICQoJy5maW5pc2gyJyk7XG4gIC8vIEF1ZGlvIHZhcmlhYmxlcy5cbiAgY29uc3QgJGF1ZGlvVGhlbWUgPSAkKCcudGhlbWUnKVswXTtcbiAgJGF1ZGlvVGhlbWUuc3JjID0gJ3NvdW5kcy9jbG9zaW5nX3RoZW1lLm1wMyc7XG4gIGNvbnN0ICRib29zdFNvdW5kID0gJCgnLmJvb3N0U291bmQnKVswXTtcbiAgJGJvb3N0U291bmQuc3JjID0gJ3NvdW5kcy9ib29zdF9zb3VuZC5tcDMnO1xuICBjb25zdCAkc2FsdFNvdW5kID0gJCgnLnNhbHRTb3VuZCcpWzBdO1xuICAkc2FsdFNvdW5kLnNyYyA9ICdzb3VuZHMvc2FsdF9zb3VuZC5tcDMnO1xuICBjb25zdCAkbW92ZVNvdW5kID0gJCgnLm1vdmVTb3VuZCcpWzBdO1xuICAkbW92ZVNvdW5kLnNyYyA9ICdzb3VuZHMvbW92ZV9zb3VuZC5tcDMnO1xuICBjb25zdCAkZXJyb3JTb3VuZCA9ICQoJy5lcnJvclNvdW5kJylbMF07XG4gICRlcnJvclNvdW5kLnNyYyA9ICdzb3VuZHMvZXJyb3Jfc291bmQubXAzJztcbiAgLy8gVmFyaWFibGVzIHRoYXQgdXBkYXRlIGR1cmluZyB0aGUgZ2FtZSwgYmFzZWQgb24gdHVybi9hYmlsdGllcyB1c2VkLlxuICBsZXQgJHRyYWNrID0gJCgnLnRyYWNrMScpO1xuICBsZXQgcGxheWVyT25lVHVybiA9IHRydWU7XG4gIGxldCBQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9IDE7XG4gIGxldCBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9IDE7XG4gIGxldCBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0gMTtcbiAgbGV0IFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAxO1xuICBsZXQgaW5kZXggPSBudWxsO1xuXG4gIC8vIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIHRvIHNlZSBpZiBlaXRoZXIgcGxheWVyIGlzIGluIGEgd2lubmluZyBwb3NpdGlvbiwgcG9zdGlvbiBpcyBkZXRlcm1pbmVzIGlmIHRoZSBpbmRleCBvZiB0aGUgb2NjdXBpZWQgc3BhY2UgaXMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIDIxKHRoZSBmaW5pc2ggbGluZSksIHRoZXJlIGFyZSBoaWRkZW4gcnVuIG9mZiBib3hlcyB0aGF0IGFsc28gZXZhdWxhdGUgdGhlIHdpbm5lciBpZiB0aGUgZmluYWwgbW92ZSB3b3VsZCBvZiB0YWtlIHRoZW4gcGxheWVyIHBhc3NlZCBpbmRleCAyMS5cbiAgZnVuY3Rpb24gY2hlY2tXaW5uZXIoKXtcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgY29uc29sZS5sb2coaW5kZXgpO1xuICAgICAgaWYoaW5kZXggPj0gMjEpe1xuICAgICAgICAkKCcuZmVlZGJhY2snKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkZmluaXNoMS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgICAgICRmaW5pc2gxLmFkZENsYXNzKCd3aW5uZXInKTtcbiAgICAgICAgJCgnLmNvbnRyb2xsZXInKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucGxheWVyT25lV2luJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnLnJlc2V0JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnLnJlc3VsdEJveCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMi5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgY29uc29sZS5sb2coaW5kZXgpO1xuICAgICAgaWYoaW5kZXggPj0gMjEpe1xuICAgICAgICAkKCcuZmVlZGJhY2snKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkZmluaXNoMi5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgICAgICRmaW5pc2gyLmFkZENsYXNzKCd3aW5uZXInKTtcbiAgICAgICAgJCgnLmNvbnRyb2xsZXInKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucGxheWVyVHdvV2luJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnLnJlc2V0JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnLnJlc3VsdEJveCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbi8vIHRoaXMgZnVuY3Rpb24gZGV0ZXJtaW5lcyB3aG9zIHR1cm4gaXQgaXMgYW5kIHVwZGF0ZXMgdGhlIG9uIHNjcmVlbiBwb3JtcHQgYWNjb3JkaW5nbHksIGl0IGlzIGZpcmVkIGRpcmVjdGx5IGFmdGVyIHRoZSBjbGljayBldmVudCBvbiBtb3ZlLCBhbmQgaXQgZmlyZWQgaWYgYSBib29zdCBoYXBwZW5zIGFmdGVyIHVwZGF0aW5nIHRoZSBib29zdCBib29sZWFuLCBpdCB3b3JrcyBvbiB0aGUgb25lIHZhcmlhYmxlIHdoaWNoIGdldHMgdXBkYXRlZCBvZiBwbGF5ZXJPbmVUdXJuIGZyb20gdHJ1ZSB0byBmYWxzZS5cbiAgZnVuY3Rpb24gZGV0ZXJtaW5lVHVybigpe1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgbG9jYXRlR2FyeSgpO1xuICAgICAgcGxheWVyT25lVHVybiA9IGZhbHNlO1xuICAgICAgJHRyYWNrID0gJCgnLnRyYWNrMicpO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyXFwncyBUdXJuJyk7XG4gICAgfSBlbHNlIGlmKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGxvY2F0ZUdhcnkoKTtcbiAgICAgIHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICAgICAgJHRyYWNrID0gJCgnLnRyYWNrMScpO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxXFwncyBUdXJuJyk7XG4gICAgfVxuICB9XG5cbi8vIFRoaXMgZnVuY3Rpb24gbG9jYXRlcyBnYXJ5IG9uIHRoZSBib2FyZCwgdGhlIHNlcGVyYXRlIHBhcnRzIG9mIHRoZSBpZiBlbHNlIHN0YXRlbWVudCBydW4gYmFzZWQgb24gd2hpY2ggcGxheWVycyB0dXJuIGl0IGlzLCBvbmNlIGRvaW5nIHNvIGl0IGZpcmVzIG9mZiB0aGUgbW92ZUdhcnkgZnVuY3Rpb24uIE9yIGlmIGl0IGRldGVjdHMgdGhlIGJvb3N0IGhhcyBiZWVuIHVzZWQoYnkgaXQgdXBkYXRpbmcgZnJvbSAxIHRvIDAgb24gdGhlIGJvb3N0IGJ1dHRvbiBjbGljaykgaWYgZmlyZXMgb2ZmIHRoZSBib29zdEdhcnkgZnVuY3Rpb24gaW5zdGVhZCwgaXQgdGhlbiB1cGRhdGVzIHRoZSBib29zdCBjb3VudCB0byAyIHdoaWNoIGluZm9ybXMgdGhlIHVzZXIgdGhlIGJvb3N0IGhhcyBiZWVuIHVzZWQgd2hlbiBjbGlja2VkLlxuICBmdW5jdGlvbiBsb2NhdGVHYXJ5KCl7XG4gICAgaWYocGxheWVyT25lVHVybil7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIGlmKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID4gMCl7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgYm9vc3RHYXJ5KCk7XG4gICAgICAgIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMi5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPiAwKXtcbiAgICAgICAgbW92ZUdhcnkoKTtcbiAgICAgIH1lbHNlIGlmKFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGJvb3N0R2FyeSgpO1xuICAgICAgICBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9IDI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyBmdW5jdGlvbiBtb3ZlcyBnYXJ5LCBpdCBmaXJzdCBkZXRlcm1pbmVzIGlmIGl0IGlzIGEgcmVndWxhciBtb3ZlIG9yIGEgYm9vc3QgbW92ZSwgaWYgaXQgaXMgYSByZWd1bGFyIG1vdmUgaXQgbW92ZXMgdGhlIGN1cnJlbnQgcGxheWVycyBHYXJ5IGJldHdlZW4gMSBhbmQgMyBpbmRleCBzcGFjZXMgYWxvbmcsIGZpbmFsbHksIGl0IHJ1bnMgdGhlIGNoZWNrV2lubmVyIGZ1bmN0aW9uIHRvIHNlZSBpZiBhIHdpbiBjb25kaXRpb24gaGFzIGJlZW4gbWV0LlxuICBmdW5jdGlvbiBtb3ZlR2FyeSgpIHtcbiAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAkdHJhY2suZXEoaW5kZXggKyAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMykgKyAxICkgKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgY2hlY2tXaW5uZXIoKTtcbiAgfVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGZpcmVzIG9mZiBpZiB0aGUgYm9vc3QgYnV0dG9uIGlzIGNsaWNrZWQgb24sIHRoZSBjbGljayBldmVudCB1cGRhdGVzIHRoZSBib29zdCBjb3VudCBhbmQgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgbG9jYXRlR2FyeSBpcyBydW5uaW5nLiBJdCBndWFyZW50ZWVzIHRoZSB1c2VyIGEgbW92ZSBvZiA1IHNwYWNlcyB0aGVuIHJ1bnMgdGhlIGNoZWNrIHdpbm5lciBmdW5jdGlvbiB0byBzZWUgaWYgYSB3aW4gY29uZGl0aW9uIGhhcyBiZWVuIG1ldC5cbiAgZnVuY3Rpb24gYm9vc3RHYXJ5KCkge1xuICAgICR0cmFjay5lcShpbmRleCkucmVtb3ZlQ2xhc3MoJ3BsYXllcicpO1xuICAgICR0cmFjay5lcShpbmRleCArIDUpLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICBjaGVja1dpbm5lcigpO1xuICB9XG5cbi8vIHRoZSBzYWx0R2FyeSBmdW5jdGlvbi5cbiAgZnVuY3Rpb24gc2FsdEdhcnkoKSB7XG4gICAgaWYoUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0gMCl7XG4gICAgICBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0gMjtcbiAgICAgIHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICAgICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDIgaGFzIGJlZW4gc2FsdGVkISBQbGF5ZXIgMSBtb3ZlcyBhZ2FpbiEnKTtcbiAgICAgIG1vdmVHYXJ5KCk7XG4gICAgfSBlbHNlIGlmKFBsYXllclR3b1NhbHRSZW1haW5pbmcgPT09IDApe1xuICAgICAgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9IDI7XG4gICAgICAvLyBwbGF5ZXJPbmVUdXJuID0gZmFsc2U7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDEgaGFzIGJlZW4gc2FsdGVkISBQbGF5ZXIgMiBtb3ZlcyBhZ2FpbiEnKTtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMi5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgbW92ZUdhcnkoKTtcbiAgICB9XG4gIH1cbi8vIHZhcmlvdXMgZXZlbnQgbGlzdGVuZXJzIGJlbG93LlxuXG4vLyBUaGlzIGlzIHRoZSBjbGljayBldmVudCBmb3IgdGhlIG1vdmUgYnV0dG9uLCB3aGVuIGNsaWNrZWQgaXQgZmlyZXMgb2ZmIHRoZSBkZXRlcm1pbmVUdXJuIGZ1bmN0aW9uIHdoaWNoIHNldHMgaW4gbW90aW9uIHRoZSBsb2NhdGVHYXJ5IGFuZCBtb3ZlR2FyeSBmdW5jdGlvbnMuXG4gICRtb3ZlLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkbW92ZVNvdW5kLnBsYXkoKTtcbiAgICBkZXRlcm1pbmVUdXJuKCk7XG4gIH0pO1xuXG4vLyB0aGlzIGlzIHRoZSBjbGljayBldmVudCBmb3IgdGhlIGJvb3N0IGJ1dHRvbiwgd2hlbiBjbGlja2VkIGl0IGNoZWNrcyBmaXJzdCB0byBzZWUgaWYgdGhlIHBsYXllciBoYXMgYWxyZWFkeSB1c2VkIHRoZWlyIGJvb3N0LCBpZiBub3QgaXQgdXBkYXRlcyB0aGF0IGluZm9ybWF0aW9uIGFuZCBydW5zIHRoZSBkZXRlcm1pbmVUdXJuIGZ1bmN0aW9uIGxpa2UgYSBub3JtYWwgbW92ZSwgd2hlbiB0aGlzIHJlYWNoZXMgdGhlIGxvY2F0ZUdhcnkgZnVuY3Rpb24sIGl0IHRha2VzIG5vdGUgdGhhdCB0aGUgYm9vc3QgaGFzIGJlZW4gdXNlZCB0byBmaXJlIG9mZiB0aGUgYm9vc3RHYXJ5IGZ1bmN0aW9uIGluc3RlYWQgb2YgdGhlIG1vdmVHYXJ5IGZ1bmN0aW9uLiBJdCB0aGVuIHVwZGF0ZXMgdGhlIGJvb3N0IHJlbWFpbmluZyBhZ2Fpbiwgc28gdGhhdCBpZiBhbm90aGVyIGJvb3N0IGlzIGF0dGVtcHRlZCwgaXQgaW5mb3JtcyB0aGUgdXNlciB0aGF0IHRoZWlyIGJvb3N0IGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cbiAgJGJvb3N0Lm9uKCdjbGljaycsICgpID0+IHtcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGlmKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgJGJvb3N0U291bmQucGxheSgpO1xuICAgICAgICBQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9IDA7XG4gICAgICAgIGRldGVybWluZVR1cm4oKTtcbiAgICAgIH0gZWxzZSBpZihQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICRlcnJvclNvdW5kLnBsYXkoKTtcbiAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGJvb3N0IGFscmVhZHkgdXNlZCEnKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGlmKFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgJGJvb3N0U291bmQucGxheSgpO1xuICAgICAgICBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9IDA7XG4gICAgICAgIGRldGVybWluZVR1cm4oKTtcbiAgICAgIH0gZWxzZSBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICRlcnJvclNvdW5kLnBsYXkoKTtcbiAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyIGJvb3N0IGFscmVhZHkgdXNlZCEnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIGJlbG93IGlzIHRoZSBldmVudCBsaXN0ZW5lciBmb3IgdGhlIHNhbHQgYWJpbGl0eS4gVXNpbmcgdGhpcyB3aWxsIHN0b3AgeW91ciBvcHBvbmVudHMgbmV4dCB0dXJuIGFuZCBnaXZlIGdhcnkgYSBub3JtYWwgZ2FyeU1vdmUgd2hpbGUgdXNpbmcgaXQuIElmIGEgcGxheWVyIGhhcyBhbHJlYWR5IHVzZWQgdGhlaXIgc2FsdCBpdCBpbmZvcm1zIHRoZW0gb24gdGhlICR0dXJuVGV4dCBmZWVkYmFjay5cbiAgJHNhbHQub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgaWYocGxheWVyT25lVHVybil7XG4gICAgICBpZihQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgJHNhbHRTb3VuZC5wbGF5KCk7XG4gICAgICAgIFBsYXllck9uZVNhbHRSZW1haW5pbmcgPSAwO1xuICAgICAgICBzYWx0R2FyeSgpO1xuICAgICAgfSBlbHNlIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAkZXJyb3JTb3VuZC5wbGF5KCk7XG4gICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMSBoYXMgYWxyZWFkeSB1c2VkIFNhbHQhJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGlmKFBsYXllclR3b1NhbHRSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAkc2FsdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9IDA7XG4gICAgICAgIHNhbHRHYXJ5KCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICRlcnJvclNvdW5kLnBsYXkoKTtcbiAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyIGhhcyBhbHJlYWR5IHVzZWQgU2FsdCEnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIENsaWNrIGV2ZW50IHRvIHN0YXJ0IHRoZSBnYW1lLCByZW1vdmVzIHRoZSBpbnN0cnVjdGlvbiBwYWdlIGFuZCB0aGVuIHNob3dzIHRoZSByYWNldHJhY2ssIGZlZWRiYWNrIGJveCBhbmQgY29udHJvbGxlci5cblxuICAkc3RhcnQub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICQoJy5pbnN0cnVjdGlvbnMnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICQoJy5ib2FyZCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJCgnLmNvbnRyb2xsZXInKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICQoJy5mZWVkYmFjaycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJGF1ZGlvVGhlbWUucGxheSgpO1xuICB9KTtcblxuICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlIHJlc2V0IGJ1dHRvbiwgaXQgYmFzaWNhbGx5IGhpZGVzIGFsbCBvZiB0aGUgZmVlZGJhY2sgZnJvbSB0aGUgcmVtYWluaW5nIGdhbWUgYW5kIG1vdmVzIGJvdGggcGxheWVyIGljb25zIGJhY2sgdG8gdGhlIHN0YXJ0IGxpbmUsIGl0IGFsc28gcmVzZXRzIHRoZSBzYWx0IGFuZCBib29zdCBjb3VudGVycyB0byAxIHNvIHRoYXQgdGhleSBjYW4gbm93IGJlIHVzZWQgYWdhaW4uXG5cbiAgJCgnLnJlc2V0Jykub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgJCgnLnRyYWNrMScpLnJlbW92ZUNsYXNzKCdwbGF5ZXIgd2lubmVyJyk7XG4gICAgJCgnLnN0YXJ0MScpLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICBQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9IDE7XG4gICAgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9MTtcbiAgICAkKCcudHJhY2syJykucmVtb3ZlQ2xhc3MoJ3BsYXllciB3aW5uZXInKTtcbiAgICAkKCcuc3RhcnQyJykuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMTtcbiAgICBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID0gMTtcbiAgICAkKCcuY29udHJvbGxlcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJCgnLmZlZWRiYWNrJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcucmVzdWx0Qm94JykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcucGxheWVyT25lV2luJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcucGxheWVyVHdvV2luJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgfSk7XG59KTtcbiJdfQ==
