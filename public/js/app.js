"use strict";$(function(){function e(){b?(g=$(".track1.player").index(),console.log(g),g>=21&&(f.play(),$(".feedback").addClass("hide"),y.addClass("player"),y.addClass("winner"),$(".controller").addClass("hide"),$(".playerOneWin").removeClass("hide"),$(".reset").removeClass("hide"),$(".resultBox").removeClass("hide"))):b||(g=$(".track2.player").index(),console.log(g),g>=21&&(f.play(),$(".feedback").addClass("hide"),u.addClass("player"),u.addClass("winner"),$(".controller").addClass("hide"),$(".playerTwoWin").removeClass("hide"),$(".reset").removeClass("hide"),$(".resultBox").removeClass("hide")))}function a(){b?(s(),b=!1,x=$(".track2"),c.text("Player 2's Turn")):b||(s(),b=!0,x=$(".track1"),c.text("Player 1's Turn"))}function s(){b?(g=$(".track1.player").index(),P>0?(v.play(),r()):0===P&&(l(),P=2)):b||(g=$(".track2.player").index(),w>0?(h.play(),r()):0===w&&(l(),w=2))}function r(){x.eq(g).removeClass("player"),x.eq(g+(Math.floor(3*Math.random())+1)).addClass("player"),e()}function l(){x.eq(g).removeClass("player"),x.eq(g+5).addClass("player"),e()}function o(){0===S?(S=2,b=!0,g=$(".track1.player").index(),c.text("Player 2 has been salted! Player 1 moves again!"),r()):0===_&&(_=2,c.text("Player 1 has been salted! Player 2 moves again!"),g=$(".track2.player").index(),r())}var d=$(".start"),n=$(".move"),t=$(".boost"),i=$(".salt"),c=$(".turn"),y=$(".finish1"),u=$(".finish2"),p=$(".theme")[0];p.src="sounds/closing_theme.mp3";var m=$(".boostSound")[0];m.src="sounds/boost_sound.mp3";var C=$(".saltSound")[0];C.src="sounds/salt_sound.mp3";var v=$(".moveSound")[0];v.src="sounds/move_sound.mp3";var h=$(".moveSound2")[0];h.src="sounds/move_sound2.mp3";var k=$(".errorSound")[0];k.src="sounds/error_sound.mp3";var f=$(".winSound")[0];f.src="sounds/winning_sound.mp3";var x=$(".track1"),b=!0,P=1,w=1,S=1,_=1,g=null;n.on("click",a),t.on("click",function(){b?1===P?(m.play(),P=0,a()):2===P&&(k.play(),c.text("Player 1 boost already used!")):b||(1===w?(m.play(),w=0,a()):2===w&&(k.play(),c.text("Player 2 boost already used!")))}),i.on("click",function(){b?1===S?(C.play(),S=0,o()):2===S&&(k.play(),c.text("Player 1 has already used Salt!")):b||(1===_?(C.play(),_=0,o()):2===_&&(k.play(),c.text("Player 2 has already used Salt!")))}),d.on("click",function(){$(".instructions").addClass("hide"),$(".board").removeClass("hide"),$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),p.play()}),$(".reset").on("click",function(){$(".track1").removeClass("player winner"),$(".start1").addClass("player"),P=1,S=1,$(".track2").removeClass("player winner"),$(".start2").addClass("player"),w=1,_=1,$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),$(".resultBox").addClass("hide"),$(".playerOneWin").addClass("hide"),$(".playerTwoWin").addClass("hide")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY2hlY2tXaW5uZXIiLCJwbGF5ZXJPbmVUdXJuIiwiaW5kZXgiLCJjb25zb2xlIiwiYWRkQ2xhc3MiLCIkd2luU291bmQiLCIkZmluaXNoMSIsInJlbW92ZUNsYXNzIiwibG9nIiwiJGZpbmlzaDIiLCJkZXRlcm1pbmVUdXJuIiwibG9jYXRlR2FyeSIsIiR0dXJuVGV4dCIsInBsYXkiLCJtb3ZlR2FyeSIsIiRtb3ZlU291bmQiLCJQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyIsIlBsYXllclR3b0Jvb3N0UmVtYWluaW5nIiwiJG1vdmVTb3VuZFR3byIsIiR0cmFjayIsImVxIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYm9vc3RHYXJ5Iiwic2FsdEdhcnkiLCJQbGF5ZXJPbmVTYWx0UmVtYWluaW5nIiwiUGxheWVyVHdvU2FsdFJlbWFpbmluZyIsIiRzdGFydCIsIiRtb3ZlIiwiJGJvb3N0IiwiJHNhbHQiLCIkYXVkaW9UaGVtZSIsInNyYyIsIiRib29zdFNvdW5kIiwiJHNhbHRTb3VuZCIsIiRlcnJvclNvdW5kIiwib24iXSwibWFwcGluZ3MiOiJZQUFBQSxHQUFFLFdBa0NBLFFBQVNDLEtBRFRDLEdBQ0FDLEVBQVNGLEVBQUFBLGtCQUFhRSxRQUNwQkMsUUFBR0YsSUFBQUEsR0FDREMsR0FBVSxLQUNWQyxFQUFZRCxPQUNaSCxFQUFHRyxhQUFZRSxTQUFBLFFBQ2JDLEVBQUFBLFNBQUEsVUFDQU4sRUFBRUssU0FBYUEsVUFDZkUsRUFBQUEsZUFBQUYsU0FBQSxRQUNBRSxFQUFBQSxpQkFBa0JDLFlBQWxCLFFBQ0FSLEVBQUUsVUFBQVEsWUFBZUgsUUFDakJMLEVBQUUsY0FBQVEsWUFBaUJBLFVBRWpCTixJQUNIQyxFQUFBSCxFQUFBLGtCQUFBRyxRQVpIQyxRQWFPSyxJQUFJUCxHQUNUQyxHQUFVLEtBQ1ZDLEVBQVlELE9BQ1pILEVBQUdHLGFBQVlFLFNBQUEsUUFDYkMsRUFBQUEsU0FBQSxVQUNBTixFQUFFSyxT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YixFQUlVZSxLQUFBQSx1Q0FPZEMsRUFBQVMsR0FBQSxRQUFBLFdBR0V0QyxFQUFFLGlCQUFpQkssU0FBUyxRQUQ5QndCLEVBQUFBLFVBQVVyQixZQUFTLFFBQ2pCUixFQUFFLGVBQUZRLFlBQTRCLFFBQzVCUixFQUFFLGFBQVVRLFlBQVksUUFDeEJSLEVBQUVjLFNBS0pkLEVBQUEsVUFBQXNDLEdBQUEsUUFBQSxXQUdFdEMsRUFBRSxXQUFXUSxZQUFZLGlCQUR6QlIsRUFBQSxXQUFhSyxTQUFRLFVBQ3JCTCxFQUF5QixFQUN6QkEsRUFBc0IsRUFDdEJpQixFQUFBQSxXQUFBQSxZQUFBQSxpQkFDQVUsRUFBQUEsV0FBQUEsU0FBQUEsVUFDQTNCLEVBQXlCLEVBQ3pCQSxFQUFzQixFQUN0QmtCLEVBQUFBLGVBQUFBLFlBQUEsUUFDQVUsRUFBQUEsYUFBQUEsWUFBQSxRQUNBNUIsRUFBRSxjQUFGSyxTQUFpQkcsUUFDakJSLEVBQUUsaUJBQWFRLFNBQVksUUFDM0JSLEVBQUUsaUJBQWNLLFNBQVMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIC8vIExpc3Qgb2YgdmFyaWFibGVzIG5lZWRlZCBmb3IgdGhlIGdhbWVcbiAgY29uc3QgJHN0YXJ0ID0gJCgnLnN0YXJ0Jyk7XG4gIGNvbnN0ICRtb3ZlID0gJCgnLm1vdmUnKTtcbiAgY29uc3QgJGJvb3N0ID0gJCgnLmJvb3N0Jyk7XG4gIGNvbnN0ICRzYWx0ID0gJCgnLnNhbHQnKTtcbiAgY29uc3QgJHR1cm5UZXh0ID0gJCgnLnR1cm4nKTtcbiAgY29uc3QgJGZpbmlzaDEgPSAkKCcuZmluaXNoMScpO1xuICBjb25zdCAkZmluaXNoMiA9ICQoJy5maW5pc2gyJyk7XG4gIC8vIEF1ZGlvIHZhcmlhYmxlcy5cbiAgY29uc3QgJGF1ZGlvVGhlbWUgPSAkKCcudGhlbWUnKVswXTtcbiAgJGF1ZGlvVGhlbWUuc3JjID0gJ3NvdW5kcy9jbG9zaW5nX3RoZW1lLm1wMyc7XG4gIGNvbnN0ICRib29zdFNvdW5kID0gJCgnLmJvb3N0U291bmQnKVswXTtcbiAgJGJvb3N0U291bmQuc3JjID0gJ3NvdW5kcy9ib29zdF9zb3VuZC5tcDMnO1xuICBjb25zdCAkc2FsdFNvdW5kID0gJCgnLnNhbHRTb3VuZCcpWzBdO1xuICAkc2FsdFNvdW5kLnNyYyA9ICdzb3VuZHMvc2FsdF9zb3VuZC5tcDMnO1xuICBjb25zdCAkbW92ZVNvdW5kID0gJCgnLm1vdmVTb3VuZCcpWzBdO1xuICAkbW92ZVNvdW5kLnNyYyA9ICdzb3VuZHMvbW92ZV9zb3VuZC5tcDMnO1xuICBjb25zdCAkbW92ZVNvdW5kVHdvID0gJCgnLm1vdmVTb3VuZDInKVswXTtcbiAgJG1vdmVTb3VuZFR3by5zcmMgPSAnc291bmRzL21vdmVfc291bmQyLm1wMyc7XG4gIGNvbnN0ICRlcnJvclNvdW5kID0gJCgnLmVycm9yU291bmQnKVswXTtcbiAgJGVycm9yU291bmQuc3JjID0gJ3NvdW5kcy9lcnJvcl9zb3VuZC5tcDMnO1xuICBjb25zdCAkd2luU291bmQgPSAkKCcud2luU291bmQnKVswXTtcbiAgJHdpblNvdW5kLnNyYyA9ICdzb3VuZHMvd2lubmluZ19zb3VuZC5tcDMnO1xuICAvLyBWYXJpYWJsZXMgdGhhdCB1cGRhdGUgZHVyaW5nIHRoZSBnYW1lLCBiYXNlZCBvbiB0dXJuL2FiaWx0aWVzIHVzZWQuXG4gIGxldCAkdHJhY2sgPSAkKCcudHJhY2sxJyk7XG4gIGxldCBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgbGV0IFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMTtcbiAgbGV0IFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMTtcbiAgbGV0IFBsYXllck9uZVNhbHRSZW1haW5pbmcgPSAxO1xuICBsZXQgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9IDE7XG4gIGxldCBpbmRleCA9IG51bGw7XG5cbiAgLy8gZnVuY3Rpb24gdGhhdCBjaGVja3MgdG8gc2VlIGlmIGVpdGhlciBwbGF5ZXIgaXMgaW4gYSB3aW5uaW5nIHBvc2l0aW9uLCBwb3N0aW9uIGlzIGRldGVybWluZXMgaWYgdGhlIGluZGV4IG9mIHRoZSBvY2N1cGllZCBzcGFjZSBpcyBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gMjEodGhlIGZpbmlzaCBsaW5lKSwgdGhlcmUgYXJlIGhpZGRlbiBydW4gb2ZmIGJveGVzIHRoYXQgYWxzbyBldmF1bGF0ZSB0aGUgd2lubmVyIGlmIHRoZSBmaW5hbCBtb3ZlIHdvdWxkIG9mIHRha2UgdGhlbiBwbGF5ZXIgcGFzc2VkIGluZGV4IDIxLlxuICBmdW5jdGlvbiBjaGVja1dpbm5lcigpe1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG4gICAgICBpZihpbmRleCA+PSAyMSl7XG4gICAgICAgICR3aW5Tb3VuZC5wbGF5KCk7XG4gICAgICAgICQoJy5mZWVkYmFjaycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICRmaW5pc2gxLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICAgICAgJGZpbmlzaDEuYWRkQ2xhc3MoJ3dpbm5lcicpO1xuICAgICAgICAkKCcuY29udHJvbGxlcicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5wbGF5ZXJPbmVXaW4nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucmVzZXQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucmVzdWx0Qm94JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoIXBsYXllck9uZVR1cm4pe1xuICAgICAgaW5kZXggPSAkKCcudHJhY2syLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG4gICAgICBpZihpbmRleCA+PSAyMSl7XG4gICAgICAgICR3aW5Tb3VuZC5wbGF5KCk7XG4gICAgICAgICQoJy5mZWVkYmFjaycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICRmaW5pc2gyLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICAgICAgJGZpbmlzaDIuYWRkQ2xhc3MoJ3dpbm5lcicpO1xuICAgICAgICAkKCcuY29udHJvbGxlcicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5wbGF5ZXJUd29XaW4nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucmVzZXQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucmVzdWx0Qm94JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuLy8gdGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIHdob3MgdHVybiBpdCBpcyBhbmQgdXBkYXRlcyB0aGUgb24gc2NyZWVuIHBvcm1wdCBhY2NvcmRpbmdseSwgaXQgaXMgZmlyZWQgZGlyZWN0bHkgYWZ0ZXIgdGhlIGNsaWNrIGV2ZW50IG9uIG1vdmUsIGFuZCBpdCBmaXJlZCBpZiBhIGJvb3N0IGhhcHBlbnMgYWZ0ZXIgdXBkYXRpbmcgdGhlIGJvb3N0IGJvb2xlYW4sIGl0IHdvcmtzIG9uIHRoZSBvbmUgdmFyaWFibGUgd2hpY2ggZ2V0cyB1cGRhdGVkIG9mIHBsYXllck9uZVR1cm4gZnJvbSB0cnVlIHRvIGZhbHNlLlxuICBmdW5jdGlvbiBkZXRlcm1pbmVUdXJuKCl7XG4gICAgaWYocGxheWVyT25lVHVybil7XG4gICAgICBsb2NhdGVHYXJ5KCk7XG4gICAgICBwbGF5ZXJPbmVUdXJuID0gZmFsc2U7XG4gICAgICAkdHJhY2sgPSAkKCcudHJhY2syJyk7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDJcXCdzIFR1cm4nKTtcbiAgICB9IGVsc2UgaWYoIXBsYXllck9uZVR1cm4pe1xuICAgICAgbG9jYXRlR2FyeSgpO1xuICAgICAgcGxheWVyT25lVHVybiA9IHRydWU7XG4gICAgICAkdHJhY2sgPSAkKCcudHJhY2sxJyk7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDFcXCdzIFR1cm4nKTtcbiAgICB9XG4gIH1cblxuLy8gVGhpcyBmdW5jdGlvbiBsb2NhdGVzIGdhcnkgb24gdGhlIGJvYXJkLCB0aGUgc2VwZXJhdGUgcGFydHMgb2YgdGhlIGlmIGVsc2Ugc3RhdGVtZW50IHJ1biBiYXNlZCBvbiB3aGljaCBwbGF5ZXJzIHR1cm4gaXQgaXMsIG9uY2UgZG9pbmcgc28gaXQgZmlyZXMgb2ZmIHRoZSBtb3ZlR2FyeSBmdW5jdGlvbi4gT3IgaWYgaXQgZGV0ZWN0cyB0aGUgYm9vc3QgaGFzIGJlZW4gdXNlZChieSBpdCB1cGRhdGluZyBmcm9tIDEgdG8gMCBvbiB0aGUgYm9vc3QgYnV0dG9uIGNsaWNrKSBpZiBmaXJlcyBvZmYgdGhlIGJvb3N0R2FyeSBmdW5jdGlvbiBpbnN0ZWFkLCBpdCB0aGVuIHVwZGF0ZXMgdGhlIGJvb3N0IGNvdW50IHRvIDIgd2hpY2ggaW5mb3JtcyB0aGUgdXNlciB0aGUgYm9vc3QgaGFzIGJlZW4gdXNlZCB3aGVuIGNsaWNrZWQuXG4gIGZ1bmN0aW9uIGxvY2F0ZUdhcnkoKXtcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPiAwKXtcbiAgICAgICAgJG1vdmVTb3VuZC5wbGF5KCk7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgYm9vc3RHYXJ5KCk7XG4gICAgICAgIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMi5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPiAwKXtcbiAgICAgICAgJG1vdmVTb3VuZFR3by5wbGF5KCk7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9ZWxzZSBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBib29zdEdhcnkoKTtcbiAgICAgICAgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgZnVuY3Rpb24gbW92ZXMgZ2FyeSwgaXQgZmlyc3QgZGV0ZXJtaW5lcyBpZiBpdCBpcyBhIHJlZ3VsYXIgbW92ZSBvciBhIGJvb3N0IG1vdmUsIGlmIGl0IGlzIGEgcmVndWxhciBtb3ZlIGl0IG1vdmVzIHRoZSBjdXJyZW50IHBsYXllcnMgR2FyeSBiZXR3ZWVuIDEgYW5kIDMgaW5kZXggc3BhY2VzIGFsb25nLCBmaW5hbGx5LCBpdCBydW5zIHRoZSBjaGVja1dpbm5lciBmdW5jdGlvbiB0byBzZWUgaWYgYSB3aW4gY29uZGl0aW9uIGhhcyBiZWVuIG1ldC5cbiAgZnVuY3Rpb24gbW92ZUdhcnkoKSB7XG4gICAgJHRyYWNrLmVxKGluZGV4KS5yZW1vdmVDbGFzcygncGxheWVyJyk7XG4gICAgJHRyYWNrLmVxKGluZGV4ICsgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMSApICkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIGNoZWNrV2lubmVyKCk7XG4gIH1cblxuLy8gVGhpcyBmdW5jdGlvbiBmaXJlcyBvZmYgaWYgdGhlIGJvb3N0IGJ1dHRvbiBpcyBjbGlja2VkIG9uLCB0aGUgY2xpY2sgZXZlbnQgdXBkYXRlcyB0aGUgYm9vc3QgY291bnQgYW5kIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIGxvY2F0ZUdhcnkgaXMgcnVubmluZy4gSXQgZ3VhcmVudGVlcyB0aGUgdXNlciBhIG1vdmUgb2YgNSBzcGFjZXMgdGhlbiBydW5zIHRoZSBjaGVjayB3aW5uZXIgZnVuY3Rpb24gdG8gc2VlIGlmIGEgd2luIGNvbmRpdGlvbiBoYXMgYmVlbiBtZXQuXG4gIGZ1bmN0aW9uIGJvb3N0R2FyeSgpIHtcbiAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAkdHJhY2suZXEoaW5kZXggKyA1KS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgY2hlY2tXaW5uZXIoKTtcbiAgfVxuXG4vLyB0aGUgc2FsdEdhcnkgZnVuY3Rpb24uXG4gIGZ1bmN0aW9uIHNhbHRHYXJ5KCkge1xuICAgIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDApe1xuICAgICAgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9IDI7XG4gICAgICBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyIGhhcyBiZWVuIHNhbHRlZCEgUGxheWVyIDEgbW92ZXMgYWdhaW4hJyk7XG4gICAgICBtb3ZlR2FyeSgpO1xuICAgIH0gZWxzZSBpZihQbGF5ZXJUd29TYWx0UmVtYWluaW5nID09PSAwKXtcbiAgICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAyO1xuICAgICAgLy8gcGxheWVyT25lVHVybiA9IGZhbHNlO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGhhcyBiZWVuIHNhbHRlZCEgUGxheWVyIDIgbW92ZXMgYWdhaW4hJyk7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazIucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIG1vdmVHYXJ5KCk7XG4gICAgfVxuICB9XG4vLyB2YXJpb3VzIGV2ZW50IGxpc3RlbmVycyBiZWxvdy5cblxuLy8gVGhpcyBpcyB0aGUgY2xpY2sgZXZlbnQgZm9yIHRoZSBtb3ZlIGJ1dHRvbiwgd2hlbiBjbGlja2VkIGl0IGZpcmVzIG9mZiB0aGUgZGV0ZXJtaW5lVHVybiBmdW5jdGlvbiB3aGljaCBzZXRzIGluIG1vdGlvbiB0aGUgbG9jYXRlR2FyeSBhbmQgbW92ZUdhcnkgZnVuY3Rpb25zLlxuICAkbW92ZS5vbignY2xpY2snLCBkZXRlcm1pbmVUdXJuKTtcblxuLy8gdGhpcyBpcyB0aGUgY2xpY2sgZXZlbnQgZm9yIHRoZSBib29zdCBidXR0b24sIHdoZW4gY2xpY2tlZCBpdCBjaGVja3MgZmlyc3QgdG8gc2VlIGlmIHRoZSBwbGF5ZXIgaGFzIGFscmVhZHkgdXNlZCB0aGVpciBib29zdCwgaWYgbm90IGl0IHVwZGF0ZXMgdGhhdCBpbmZvcm1hdGlvbiBhbmQgcnVucyB0aGUgZGV0ZXJtaW5lVHVybiBmdW5jdGlvbiBsaWtlIGEgbm9ybWFsIG1vdmUsIHdoZW4gdGhpcyByZWFjaGVzIHRoZSBsb2NhdGVHYXJ5IGZ1bmN0aW9uLCBpdCB0YWtlcyBub3RlIHRoYXQgdGhlIGJvb3N0IGhhcyBiZWVuIHVzZWQgdG8gZmlyZSBvZmYgdGhlIGJvb3N0R2FyeSBmdW5jdGlvbiBpbnN0ZWFkIG9mIHRoZSBtb3ZlR2FyeSBmdW5jdGlvbi4gSXQgdGhlbiB1cGRhdGVzIHRoZSBib29zdCByZW1haW5pbmcgYWdhaW4sIHNvIHRoYXQgaWYgYW5vdGhlciBib29zdCBpcyBhdHRlbXB0ZWQsIGl0IGluZm9ybXMgdGhlIHVzZXIgdGhhdCB0aGVpciBib29zdCBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuXG4gICRib29zdC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYocGxheWVyT25lVHVybil7XG4gICAgICBpZihQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICRib29zdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPSAwO1xuICAgICAgICBkZXRlcm1pbmVUdXJuKCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAkZXJyb3JTb3VuZC5wbGF5KCk7XG4gICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMSBib29zdCBhbHJlYWR5IHVzZWQhJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghcGxheWVyT25lVHVybil7XG4gICAgICBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICRib29zdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAwO1xuICAgICAgICBkZXRlcm1pbmVUdXJuKCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAkZXJyb3JTb3VuZC5wbGF5KCk7XG4gICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMiBib29zdCBhbHJlYWR5IHVzZWQhJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBiZWxvdyBpcyB0aGUgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBzYWx0IGFiaWxpdHkuIFVzaW5nIHRoaXMgd2lsbCBzdG9wIHlvdXIgb3Bwb25lbnRzIG5leHQgdHVybiBhbmQgZ2l2ZSBnYXJ5IGEgbm9ybWFsIGdhcnlNb3ZlIHdoaWxlIHVzaW5nIGl0LiBJZiBhIHBsYXllciBoYXMgYWxyZWFkeSB1c2VkIHRoZWlyIHNhbHQgaXQgaW5mb3JtcyB0aGVtIG9uIHRoZSAkdHVyblRleHQgZmVlZGJhY2suXG4gICRzYWx0Lm9uKCdjbGljaycsKCkgPT4ge1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgaWYoUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICRzYWx0U291bmQucGxheSgpO1xuICAgICAgICBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0gMDtcbiAgICAgICAgc2FsdEdhcnkoKTtcbiAgICAgIH0gZWxzZSBpZihQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDEgaGFzIGFscmVhZHkgdXNlZCBTYWx0IScpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZighcGxheWVyT25lVHVybil7XG4gICAgICBpZihQbGF5ZXJUd29TYWx0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgJHNhbHRTb3VuZC5wbGF5KCk7XG4gICAgICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAwO1xuICAgICAgICBzYWx0R2FyeSgpO1xuICAgICAgfSBlbHNlIGlmKFBsYXllclR3b1NhbHRSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAkZXJyb3JTb3VuZC5wbGF5KCk7XG4gICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMiBoYXMgYWxyZWFkeSB1c2VkIFNhbHQhJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBDbGljayBldmVudCB0byBzdGFydCB0aGUgZ2FtZSwgcmVtb3ZlcyB0aGUgaW5zdHJ1Y3Rpb24gcGFnZSBhbmQgdGhlbiBzaG93cyB0aGUgcmFjZXRyYWNrLCBmZWVkYmFjayBib3ggYW5kIGNvbnRyb2xsZXIuXG5cbiAgJHN0YXJ0Lm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkKCcuaW5zdHJ1Y3Rpb25zJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuYm9hcmQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICQoJy5jb250cm9sbGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuZmVlZGJhY2snKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICRhdWRpb1RoZW1lLnBsYXkoKTtcbiAgfSk7XG5cbiAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIHRoZSByZXNldCBidXR0b24sIGl0IGJhc2ljYWxseSBoaWRlcyBhbGwgb2YgdGhlIGZlZWRiYWNrIGZyb20gdGhlIHJlbWFpbmluZyBnYW1lIGFuZCBtb3ZlcyBib3RoIHBsYXllciBpY29ucyBiYWNrIHRvIHRoZSBzdGFydCBsaW5lLCBpdCBhbHNvIHJlc2V0cyB0aGUgc2FsdCBhbmQgYm9vc3QgY291bnRlcnMgdG8gMSBzbyB0aGF0IHRoZXkgY2FuIG5vdyBiZSB1c2VkIGFnYWluLlxuXG4gICQoJy5yZXNldCcpLm9uKCdjbGljaycsKCkgPT4ge1xuICAgICQoJy50cmFjazEnKS5yZW1vdmVDbGFzcygncGxheWVyIHdpbm5lcicpO1xuICAgICQoJy5zdGFydDEnKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPSAxO1xuICAgIFBsYXllck9uZVNhbHRSZW1haW5pbmcgPTE7XG4gICAgJCgnLnRyYWNrMicpLnJlbW92ZUNsYXNzKCdwbGF5ZXIgd2lubmVyJyk7XG4gICAgJCgnLnN0YXJ0MicpLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9IDE7XG4gICAgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9IDE7XG4gICAgJCgnLmNvbnRyb2xsZXInKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICQoJy5mZWVkYmFjaycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJCgnLnJlc3VsdEJveCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCgnLnBsYXllck9uZVdpbicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCgnLnBsYXllclR3b1dpbicpLmFkZENsYXNzKCdoaWRlJyk7XG4gIH0pO1xufSk7XG4iXX0=
