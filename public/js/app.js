"use strict";$(function(){function a(){F?(L=$(".track1.player").index())>=21&&(e(),b.addClass("player"),b.addClass("winner"),$(".playerOneWin").removeClass("hide"),$(".aiWin").addClass("hide")):F||(L=$(".track2.player").index())>=21&&(e(),q.addClass("player"),q.addClass("winner"),Q?Q&&$(".aiWin").removeClass("hide"):$(".playerTwoWin").removeClass("hide"))}function e(){D.play(),g.addClass("hide"),S.addClass("hide"),w.removeClass("hide"),_.removeClass("hide")}function s(){F?(r(),F=!1,E=$(".track2"),P.text("Player 2's Turn")):F||(r(),F=!0,E=$(".track1"),P.text("Player 1's Turn"))}function r(){F?(L=$(".track1.player").index(),H>0?(j.play(),l()):0===H&&(n(),H=2)):F||(L=$(".track2.player").index(),I>0?(z.play(),l()):0===I&&(n(),I=2))}function l(){Q?Q&&(j.play(),P.text("Player 1 get's moving!"),E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),a(),(L=$(".track1.player").index())<21&&y()):(E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),a())}function n(){Q?Q&&(B.play(),E.eq(L).removeClass("player"),E.eq(L+5).addClass("player"),a(),(L=$(".track1.player").index())<21&&y()):(E.eq(L).removeClass("player"),E.eq(L+5).addClass("player"),a())}function t(){Q?Q&&0===J&&(F=!0,E=$(".track1"),L=$(".track1.player").index(),P.text("Mecha Gary has been salted!   Player 1 moves again!"),E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),J=2,a()):0===J?(J=2,F=!0,L=$(".track1.player").index(),P.text("Player 2 has been salted! Player 1 moves again!"),l()):0===K&&(K=2,P.text("Player 1 has been salted!   Player 2 moves again!"),L=$(".track2.player").index(),l())}function o(){P.text("Mecha Gary has salted you, he moves again!"),O.play(),K=2,E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),setTimeout(function(){i()},1e3),F=!1,a(),F=!0}function d(){B.play(),E.eq(L).removeClass("player"),E.eq(L+5).addClass("player"),P.text("Mecha Gary has boosted!   Player 1's turn "),F=!1,I=2,a(),F=!0}function i(){z.play(),E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),P.text("Mecha Gary has made his move!   Player 1's turn"),F=!1,a(),F=!0}function c(){L=$(".track1.player").index(),N=L}function y(){c(),E=$(".track2"),L=$(".track2.player").index(),setTimeout(function(){N<=4?i():N>4&&N<15?(R=Math.floor(5*Math.random())+1,R<=2?i():R>2&&R<=4&&1===I?d():R>2&&R<=4&&2===H?i():5===R&&1===K?o():5===R&&2===K&&i()):N>=15&&(R=Math.floor(5*Math.random())+1,R<=3&&1===I?d():R<=3&&2===I&&1===K?o():R<=3&&2===I&&2===J?i():R>3&&1===J?o():i())},1e3)}function u(){Q?Q&&k.on("click",function(){E=$(".track1"),L=$(".track1.player").index(),l()}):k.on("click",function(){s()})}function p(){Q?Q&&x.on("click",function(){1===H?(E=$(".track1"),L=$(".track1.player").index(),H=2,P.text("Player 1 uses boost!"),n()):2===H&&(A.play(),P.text("Player 1 has already used boost!"))}):x.on("click",function(){F?1===H?(B.play(),H=0,s()):2===H&&(A.play(),P.text("Player 1 boost already used!")):F||(1===I?(B.play(),I=0,s()):2===I&&(A.play(),P.text("Player 2 boost already used!")))})}function h(){Q?Q&&M.on("click",function(){1===J?(J=0,O.play(),t()):2===J&&(A.play(),P.text("Player 1 has already used Salt!"))}):M.on("click",function(){F?1===J?(O.play(),J=0,t()):2===J&&(A.play(),P.text("Player 1 has already used Salt!")):F||(1===K?(O.play(),K=0,t()):2===K&&(A.play(),P.text("Player 2 has already used Salt!")))})}function m(){W.addClass("hide"),T.removeClass("hide"),S.removeClass("hide"),g.removeClass("hide"),u(),p(),h(),G.play()}function f(){$(".track1").removeClass("player winner"),$(".start1").addClass("player"),H=1,J=1,$(".track2").removeClass("player winner"),$(".start2").addClass("player"),I=1,K=1,N=null,$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),$(".resultBox").addClass("hide"),$(".playerOneWin").addClass("hide"),G.src="",G.src="sounds/closing_theme.mp3",G.play()}var C=$(".startbtn2"),v=$(".startbtn1"),k=$(".move"),x=$(".boost"),M=$(".salt"),P=$(".turn"),b=$(".finish1"),q=$(".finish2"),g=$(".feedback"),S=$(".controller"),w=$(".reset"),_=$(".resultBox"),W=$(".instructions"),T=$(".board"),G=$(".theme")[0];G.src="sounds/closing_theme.mp3";var B=$(".boostSound")[0];B.src="sounds/boost_sound.mp3";var O=$(".saltSound")[0];O.src="sounds/salt_sound.mp3";var j=$(".moveSound")[0];j.src="sounds/move_sound.mp3";var z=$(".moveSound2")[0];z.src="sounds/move_sound2.mp3";var A=$(".errorSound")[0];A.src="sounds/error_sound.mp3";var D=$(".winSound")[0];D.src="sounds/winning_sound.mp3";var E=$(".track1"),F=!0,H=1,I=1,J=1,K=1,L=null,N=null,Q=!1,R=null;C.on("click",function(){m()}),v.on("click",function(){Q=!0,m(),P.text("Make your first move!")}),Q?Q&&w.on("click",function(){f(),$(".aiWin").addClass("hide"),P.text("Player 1's time to shine!")}):w.on("click",function(){f(),$(".playerTwoWin").addClass("hide")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY2hlY2tXaW5uZXIiLCJwbGF5ZXJPbmVUdXJuIiwiaW5kZXgiLCIkZmluaXNoMSIsImFsd2F5c09uV2luIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIiRmaW5pc2gyIiwiaXNPbmVQbGF5ZXIiLCIkd2luU291bmQiLCJwbGF5IiwiJGZlZWRiYWNrIiwiJGNvbnRyb2xsZXIiLCJkZXRlcm1pbmVUdXJuIiwibG9jYXRlR2FyeSIsIiR0dXJuVGV4dCIsIm1vdmVHYXJ5IiwiJG1vdmVTb3VuZCIsIlBsYXllck9uZUJvb3N0UmVtYWluaW5nIiwiUGxheWVyVHdvQm9vc3RSZW1haW5pbmciLCIkbW92ZVNvdW5kVHdvIiwiZXEiLCJ0ZXh0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiJHRyYWNrIiwiYm9vc3RHYXJ5IiwiJGJvb3N0U291bmQiLCJzYWx0R2FyeSIsIlBsYXllck9uZVNhbHRSZW1haW5pbmciLCJQbGF5ZXJUd29TYWx0UmVtYWluaW5nIiwiYWlTYWx0IiwiJHNhbHRTb3VuZCIsInNldFRpbWVvdXQiLCJhaVJlZyIsImFpQm9vc3QiLCJwbGF5ZXJPbmVUcmFjayIsImFpTW92ZSIsImFpTW92ZURlY2lkZXIiLCJwbGF5ZXJPbmVUcmFja2VyIiwibW92ZUV2ZW50IiwiJG1vdmUiLCJvbiIsImJvb3N0RXZlbnQiLCIkYm9vc3QiLCIkZXJyb3JTb3VuZCIsInNhbHRFdmVudCIsIiRzYWx0IiwiYWx3YXlzT25TdGFydCIsIiRpbnN0cnVjdGlvbnMiLCIkYm9hcmQiLCIkYXVkaW9UaGVtZSIsImFsd2F5c09uUmVzZXQiLCJzcmMiLCIkc3RhcnQiLCIkc3RhcnQxUGxheWVyIiwiJHJlc2V0IiwiJHJlc3VsdEJveCJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0E0Q0EsUUFBU0MsS0FEVEMsR0FDQUMsRUFBU0YsRUFBQUEsa0JBQWFFLFVBQ2pCRCxLQUNEQyxJQUNBQyxFQUFHRCxTQUFZLFVBQ2JFLEVBQUFBLFNB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QU1yQyxHQUFlbEIsRUFBQSxlQUFyQixFQUNBa0IsR0FBQXFDLElBQWlCLHdCQUNqQixJQUFNbEMsR0FBZ0JyQixFQUFFLGVBQWUsRUFDdkNxQixHQUFBQSxJQUFBLHdCQUNBLElBQU0wQixHQUFjL0MsRUFBRSxhQUFGLEVBQ3BCK0MsR0FBQUEsSUFBQSwwQkFFQXJDLElBQUFBLEdBQUFWLEVBQUEsV0FDQUUsR0FBQSxFQUNJeUIsRUFBSixFQUNJekIsRUFBSixFQUNJaUIsRUFBQUEsRUFDQUMsRUFBQUEsRUFDQVcsRUFBQUEsS0FDQUMsRUFBQUEsS0FDQTdCLEdBQUosRUFDSXNDLEVBQUFBLElBNFRKZSxHQUFPWixHQUFHLFFBQVMsV0FBbkJZLE1BSUFDLEVBQUFiLEdBQUEsUUFBQSxXQUNBYSxHQUFBLEVBQ0VoRCxJQUNBeUMsRUFBQUEsS0FBQUEsMkJBa0JDekMsRUFLSUEsR0FDTGlELEVBQU9kLEdBQUcsUUFBVixXQUNFVSxJQUNBdEQsRUFBRSxVQUFVTyxTQUFTLFFBQ3JCUyxFQUFVTyxLQUFLLCtCQVJqQm1DLEVBQU9kLEdBQUcsUUFBVixXQUNFVSxJQUNBdEQsRUFBRSxpQkFBaUJPLFNBQVMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIC8vIExpc3Qgb2YgdmFyaWFibGVzIG5lZWRlZCBmb3IgdGhlIGdhbWVcbiAgY29uc3QgJHN0YXJ0ID0gJCgnLnN0YXJ0YnRuMicpO1xuICBjb25zdCAkc3RhcnQxUGxheWVyID0gJCgnLnN0YXJ0YnRuMScpO1xuICBjb25zdCAkbW92ZSA9ICQoJy5tb3ZlJyk7XG4gIGNvbnN0ICRib29zdCA9ICQoJy5ib29zdCcpO1xuICBjb25zdCAkc2FsdCA9ICQoJy5zYWx0Jyk7XG4gIGNvbnN0ICR0dXJuVGV4dCA9ICQoJy50dXJuJyk7XG4gIGNvbnN0ICRmaW5pc2gxID0gJCgnLmZpbmlzaDEnKTtcbiAgY29uc3QgJGZpbmlzaDIgPSAkKCcuZmluaXNoMicpO1xuICBjb25zdCAkZmVlZGJhY2sgPSAkKCcuZmVlZGJhY2snKTtcbiAgY29uc3QgJGNvbnRyb2xsZXIgPSAkKCcuY29udHJvbGxlcicpO1xuICBjb25zdCAkcmVzZXQgPSAkKCcucmVzZXQnKTtcbiAgY29uc3QgJHJlc3VsdEJveCA9ICQoJy5yZXN1bHRCb3gnKTtcbiAgY29uc3QgJGluc3RydWN0aW9ucyA9ICQoJy5pbnN0cnVjdGlvbnMnKTtcbiAgY29uc3QgJGJvYXJkID0gJCgnLmJvYXJkJyk7XG4gIC8vIEF1ZGlvIHZhcmlhYmxlcy5cbiAgY29uc3QgJGF1ZGlvVGhlbWUgPSAkKCcudGhlbWUnKVswXTtcbiAgJGF1ZGlvVGhlbWUuc3JjID0gJ3NvdW5kcy9jbG9zaW5nX3RoZW1lLm1wMyc7XG4gIGNvbnN0ICRib29zdFNvdW5kID0gJCgnLmJvb3N0U291bmQnKVswXTtcbiAgJGJvb3N0U291bmQuc3JjID0gJ3NvdW5kcy9ib29zdF9zb3VuZC5tcDMnO1xuICBjb25zdCAkc2FsdFNvdW5kID0gJCgnLnNhbHRTb3VuZCcpWzBdO1xuICAkc2FsdFNvdW5kLnNyYyA9ICdzb3VuZHMvc2FsdF9zb3VuZC5tcDMnO1xuICBjb25zdCAkbW92ZVNvdW5kID0gJCgnLm1vdmVTb3VuZCcpWzBdO1xuICAkbW92ZVNvdW5kLnNyYyA9ICdzb3VuZHMvbW92ZV9zb3VuZC5tcDMnO1xuICBjb25zdCAkbW92ZVNvdW5kVHdvID0gJCgnLm1vdmVTb3VuZDInKVswXTtcbiAgJG1vdmVTb3VuZFR3by5zcmMgPSAnc291bmRzL21vdmVfc291bmQyLm1wMyc7XG4gIGNvbnN0ICRlcnJvclNvdW5kID0gJCgnLmVycm9yU291bmQnKVswXTtcbiAgJGVycm9yU291bmQuc3JjID0gJ3NvdW5kcy9lcnJvcl9zb3VuZC5tcDMnO1xuICBjb25zdCAkd2luU291bmQgPSAkKCcud2luU291bmQnKVswXTtcbiAgJHdpblNvdW5kLnNyYyA9ICdzb3VuZHMvd2lubmluZ19zb3VuZC5tcDMnO1xuICAvLyBWYXJpYWJsZXMgdGhhdCB1cGRhdGUgZHVyaW5nIHRoZSBnYW1lLCBiYXNlZCBvbiB0dXJuL2FiaWx0aWVzIHVzZWQuXG4gIGxldCAkdHJhY2sgPSAkKCcudHJhY2sxJyk7XG4gIGxldCBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgbGV0IFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMTtcbiAgbGV0IFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMTtcbiAgbGV0IFBsYXllck9uZVNhbHRSZW1haW5pbmcgPSAxO1xuICBsZXQgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9IDE7XG4gIGxldCBpbmRleCA9IG51bGw7XG4gIGxldCBwbGF5ZXJPbmVUcmFja2VyID0gbnVsbDtcbiAgbGV0IGlzT25lUGxheWVyID0gZmFsc2U7XG4gIGxldCBhaU1vdmVEZWNpZGVyID0gbnVsbDtcblxuICAvLyBmdW5jdGlvbiB0aGF0IGNoZWNrcyB0byBzZWUgaWYgZWl0aGVyIHBsYXllciBpcyBpbiBhIHdpbm5pbmcgcG9zaXRpb24sIHBvc3Rpb24gaXMgZGV0ZXJtaW5lcyBpZiB0aGUgaW5kZXggb2YgdGhlIG9jY3VwaWVkIHNwYWNlIGlzIGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbiAyMSh0aGUgZmluaXNoIGxpbmUpLCB0aGVyZSBhcmUgaGlkZGVuIHJ1biBvZmYgYm94ZXMgdGhhdCBhbHNvIGV2YXVsYXRlIHRoZSB3aW5uZXIgaWYgdGhlIGZpbmFsIG1vdmUgd291bGQgb2YgdGFrZSB0aGVuIHBsYXllciBwYXNzZWQgaW5kZXggMjEuXG4gIGZ1bmN0aW9uIGNoZWNrV2lubmVyKCl7XG4gICAgaWYocGxheWVyT25lVHVybil7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIGlmKGluZGV4ID49IDIxKXtcbiAgICAgICAgYWx3YXlzT25XaW4oKTtcbiAgICAgICAgJGZpbmlzaDEuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgICAkZmluaXNoMS5hZGRDbGFzcygnd2lubmVyJyk7XG4gICAgICAgICQoJy5wbGF5ZXJPbmVXaW4nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcuYWlXaW4nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZighcGxheWVyT25lVHVybil7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazIucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIGlmKGluZGV4ID49IDIxKXtcbiAgICAgICAgYWx3YXlzT25XaW4oKTtcbiAgICAgICAgJGZpbmlzaDIuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgICAkZmluaXNoMi5hZGRDbGFzcygnd2lubmVyJyk7XG4gICAgICAgIGlmKCFpc09uZVBsYXllcil7XG4gICAgICAgICAgJCgnLnBsYXllclR3b1dpbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgIH0gZWxzZSBpZihpc09uZVBsYXllcil7XG4gICAgICAgICAgJCgnLmFpV2luJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyByZWZhY3RvcmVkIGFzIHRoZXNlIGV2ZW50cyBhbHdheXMgaGFwcGVuIHJlZ2FyZGxlc3Mgb2Ygd2hvIHdpbnMuXG4gIGZ1bmN0aW9uIGFsd2F5c09uV2luKCl7XG4gICAgJHdpblNvdW5kLnBsYXkoKTtcbiAgICAkZmVlZGJhY2suYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkY29udHJvbGxlci5hZGRDbGFzcygnaGlkZScpO1xuICAgICRyZXNldC5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICRyZXN1bHRCb3gucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgfVxuXG4gIC8vIHRoaXMgZnVuY3Rpb24gZGV0ZXJtaW5lcyB3aG9zIHR1cm4gaXQgaXMgYW5kIHVwZGF0ZXMgdGhlIG9uIHNjcmVlbiBwb3JtcHQgYWNjb3JkaW5nbHksIGl0IGlzIGZpcmVkIGRpcmVjdGx5IGFmdGVyIHRoZSBjbGljayBldmVudCBvbiBtb3ZlLCBhbmQgaXQgZmlyZWQgaWYgYSBib29zdCBoYXBwZW5zIGFmdGVyIHVwZGF0aW5nIHRoZSBib29zdCBib29sZWFuLCBpdCB3b3JrcyBvbiB0aGUgb25lIHZhcmlhYmxlIHdoaWNoIGdldHMgdXBkYXRlZCBvZiBwbGF5ZXJPbmVUdXJuIGZyb20gdHJ1ZSB0byBmYWxzZS5cbiAgZnVuY3Rpb24gZGV0ZXJtaW5lVHVybigpe1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgbG9jYXRlR2FyeSgpO1xuICAgICAgcGxheWVyT25lVHVybiA9IGZhbHNlO1xuICAgICAgJHRyYWNrID0gJCgnLnRyYWNrMicpO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyXFwncyBUdXJuJyk7XG4gICAgfSBlbHNlIGlmKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGxvY2F0ZUdhcnkoKTtcbiAgICAgIHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICAgICAgJHRyYWNrID0gJCgnLnRyYWNrMScpO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxXFwncyBUdXJuJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyBmdW5jdGlvbiBsb2NhdGVzIGdhcnkgb24gdGhlIGJvYXJkLCB0aGUgc2VwZXJhdGUgcGFydHMgb2YgdGhlIGlmIGVsc2Ugc3RhdGVtZW50IHJ1biBiYXNlZCBvbiB3aGljaCBwbGF5ZXJzIHR1cm4gaXQgaXMsIG9uY2UgZG9pbmcgc28gaXQgZmlyZXMgb2ZmIHRoZSBtb3ZlR2FyeSBmdW5jdGlvbi4gT3IgaWYgaXQgZGV0ZWN0cyB0aGUgYm9vc3QgaGFzIGJlZW4gdXNlZChieSBpdCB1cGRhdGluZyBmcm9tIDEgdG8gMCBvbiB0aGUgYm9vc3QgYnV0dG9uIGNsaWNrKSBpZiBmaXJlcyBvZmYgdGhlIGJvb3N0R2FyeSBmdW5jdGlvbiBpbnN0ZWFkLCBpdCB0aGVuIHVwZGF0ZXMgdGhlIGJvb3N0IGNvdW50IHRvIDIgd2hpY2ggaW5mb3JtcyB0aGUgdXNlciB0aGUgYm9vc3QgaGFzIGJlZW4gdXNlZCB3aGVuIGNsaWNrZWQgYWdhaW4uXG4gIGZ1bmN0aW9uIGxvY2F0ZUdhcnkoKXtcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPiAwKXtcbiAgICAgICAgJG1vdmVTb3VuZC5wbGF5KCk7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgYm9vc3RHYXJ5KCk7XG4gICAgICAgIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMi5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPiAwKXtcbiAgICAgICAgJG1vdmVTb3VuZFR3by5wbGF5KCk7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9ZWxzZSBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBib29zdEdhcnkoKTtcbiAgICAgICAgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgZnVuY3Rpb24gbW92ZXMgZ2FyeSwgaXQgZmlyc3QgZGV0ZXJtaW5lcyBpZiBpdCBpcyBhIHJlZ3VsYXIgbW92ZSBvciBhIGJvb3N0IG1vdmUsIGlmIGl0IGlzIGEgcmVndWxhciBtb3ZlIGl0IG1vdmVzIHRoZSBjdXJyZW50IHBsYXllcnMgR2FyeSBiZXR3ZWVuIDEgYW5kIDMgaW5kZXggc3BhY2VzIGFsb25nLCBmaW5hbGx5LCBpdCBydW5zIHRoZSBjaGVja1dpbm5lciBmdW5jdGlvbiB0byBzZWUgaWYgYSB3aW4gY29uZGl0aW9uIGhhcyBiZWVuIG1ldC5cbiAgZnVuY3Rpb24gbW92ZUdhcnkoKSB7XG4gICAgaWYoIWlzT25lUGxheWVyKXtcbiAgICAgICR0cmFjay5lcShpbmRleCkucmVtb3ZlQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgJHRyYWNrLmVxKGluZGV4ICsgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMSApICkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgY2hlY2tXaW5uZXIoKTtcbiAgICB9IGVsc2UgaWYoaXNPbmVQbGF5ZXIpe1xuICAgICAgJG1vdmVTb3VuZC5wbGF5KCk7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDEgZ2V0XFwncyBtb3ZpbmchJyk7XG4gICAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAgICR0cmFjay5lcShpbmRleCArIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSArIDEgKSApLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICAgIGNoZWNrV2lubmVyKCk7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIGlmKGluZGV4IDwgMjEpe1xuICAgICAgICBhaU1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGZ1bmN0aW9uIGZpcmVzIG9mZiBpZiB0aGUgYm9vc3QgYnV0dG9uIGlzIGNsaWNrZWQgb24sIHRoZSBjbGljayBldmVudCB1cGRhdGVzIHRoZSBib29zdCBjb3VudCBhbmQgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgbG9jYXRlR2FyeSBpcyBydW5uaW5nLiBJdCBndWFyZW50ZWVzIHRoZSB1c2VyIGEgbW92ZSBvZiA1IHNwYWNlcyB0aGVuIHJ1bnMgdGhlIGNoZWNrIHdpbm5lciBmdW5jdGlvbiB0byBzZWUgaWYgYSB3aW4gY29uZGl0aW9uIGhhcyBiZWVuIG1ldC4gdGhpcyBpZiBmb3IgdGhlIDIgcGxheWVyIHZlcnNpb24uXG4gIGZ1bmN0aW9uIGJvb3N0R2FyeSgpIHtcbiAgICBpZighaXNPbmVQbGF5ZXIpe1xuICAgICAgJHRyYWNrLmVxKGluZGV4KS5yZW1vdmVDbGFzcygncGxheWVyJyk7XG4gICAgICAkdHJhY2suZXEoaW5kZXggKyA1KS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgICBjaGVja1dpbm5lcigpO1xuICAgIH0gZWxzZSBpZihpc09uZVBsYXllcil7XG4gICAgICAkYm9vc3RTb3VuZC5wbGF5KCk7XG4gICAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAgICR0cmFjay5lcShpbmRleCArIDUpLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICAgIGNoZWNrV2lubmVyKCk7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIGlmKGluZGV4IDwgMjEpe1xuICAgICAgICBhaU1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIC8vIHRoZSBzYWx0R2FyeSBmdW5jdGlvbi4gZm9yIHRoZSAyIHBsYXllciB2ZXJzaW9uLlxuICBmdW5jdGlvbiBzYWx0R2FyeSgpIHtcbiAgICBpZighaXNPbmVQbGF5ZXIpe1xuICAgICAgaWYoUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0gMCl7XG4gICAgICAgIFBsYXllck9uZVNhbHRSZW1haW5pbmcgPSAyO1xuICAgICAgICBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgICAgICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMiBoYXMgYmVlbiBzYWx0ZWQhIFBsYXllciAxIG1vdmVzIGFnYWluIScpO1xuICAgICAgICBtb3ZlR2FyeSgpO1xuICAgICAgfSBlbHNlIGlmKFBsYXllclR3b1NhbHRSZW1haW5pbmcgPT09IDApe1xuICAgICAgICBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID0gMjtcbiAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGhhcyBiZWVuIHNhbHRlZCEgICBQbGF5ZXIgMiBtb3ZlcyBhZ2FpbiEnKTtcbiAgICAgICAgaW5kZXggPSAkKCcudHJhY2syLnBsYXllcicpLmluZGV4KCk7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKGlzT25lUGxheWVyKXtcbiAgICAgIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDApe1xuICAgICAgICBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgICAgICAgJHRyYWNrID0gJCgnLnRyYWNrMScpO1xuICAgICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgICAgJHR1cm5UZXh0LnRleHQoJ01lY2hhIEdhcnkgaGFzIGJlZW4gc2FsdGVkISAgIFBsYXllciAxIG1vdmVzIGFnYWluIScpO1xuICAgICAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAgICAgJHRyYWNrLmVxKGluZGV4ICsgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMSApICkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgICBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0gMjtcbiAgICAgICAgY2hlY2tXaW5uZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gZnVuY3Rpb24gYmVsb3cgaXMgZm9yIHRoZSBvbmUgcGxheWVyIG1vZGUsIGl0IHRyYWNrcyBwbGF5ZXIgMXMgcG9zdGlvbiB2aWEgdGhlIGluZGV4IGFuZCBzYXZlcyBpdCBpbiBwbGF5ZXIgMSB0cmFja2VyLCB0aGVuIG1ha2VzIGEgZGVzaWNpb24gYmFzZWQgb24gdGhhdCBwb3N0aW9uLCB0aGUgYmlnZ2VyIHRoZSBudW1iZXIgaW4gcGxheWVyIHRyYWNrZXIgdGhlIG1vcmUgbGlrZWxpbmVzcyBvZiBpdCB1c2luZyBvbmUgb2YgdGhlIGFiaWxpdHkgbW92ZXMuIFRoZSBmaXJzdCB0aHJlZSBmdW5jdGlvbnMgZGVmaW5lIHRoZSBhY3R1YWwgbW92ZSB0byBtYWtlIGl0IG1vcmUgcmVhZGFibGUgaW4gdGhlIGFjdHVhbCBhaSBkZXNpY2lvbiBmdW5jdGlvbi4gZWFjaCBtb3ZlIGNoYW5nZXMgdG8gcGxheWVyIDEgdHVybiBmYWxzZSBiZWZvcmUgY2FsbGluZyBjaGVja1dpbm5lciBzbyBjYW4gdXNlIHRoZSBzYW1lIGZ1bmN0aW9uIGluIGJvdGggMSBwIGFuZCAyIHAgdmVyc2lvbi5cbiAgZnVuY3Rpb24gYWlTYWx0KCl7XG4gICAgJHR1cm5UZXh0LnRleHQoJ01lY2hhIEdhcnkgaGFzIHNhbHRlZCB5b3UsIGhlIG1vdmVzIGFnYWluIScpO1xuICAgICRzYWx0U291bmQucGxheSgpO1xuICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAyO1xuICAgICR0cmFjay5lcShpbmRleCkucmVtb3ZlQ2xhc3MoJ3BsYXllcicpO1xuICAgICR0cmFjay5lcShpbmRleCArIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSArIDEgKSApLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBhaVJlZygpO1xuICAgIH0sIDEwMDApO1xuICAgIHBsYXllck9uZVR1cm4gPSBmYWxzZTtcbiAgICBjaGVja1dpbm5lcigpO1xuICAgIHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gYWlCb29zdCgpe1xuICAgICRib29zdFNvdW5kLnBsYXkoKTtcbiAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAkdHJhY2suZXEoaW5kZXggKyA1KS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgJHR1cm5UZXh0LnRleHQoJ01lY2hhIEdhcnkgaGFzIGJvb3N0ZWQhICAgUGxheWVyIDFcXCdzIHR1cm4gJyk7XG4gICAgcGxheWVyT25lVHVybiA9IGZhbHNlO1xuICAgIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMjtcbiAgICBjaGVja1dpbm5lcigpO1xuICAgIHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gYWlSZWcoKXtcbiAgICAkbW92ZVNvdW5kVHdvLnBsYXkoKTtcbiAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAkdHJhY2suZXEoaW5kZXggKyAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMykgKyAxICkgKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgJHR1cm5UZXh0LnRleHQoJ01lY2hhIEdhcnkgaGFzIG1hZGUgaGlzIG1vdmUhICAgUGxheWVyIDFcXCdzIHR1cm4nKTtcbiAgICBwbGF5ZXJPbmVUdXJuID0gZmFsc2U7XG4gICAgY2hlY2tXaW5uZXIoKTtcbiAgICBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllck9uZVRyYWNrKCl7XG4gICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgcGxheWVyT25lVHJhY2tlciA9IGluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gYWlNb3ZlKCl7XG4gICAgcGxheWVyT25lVHJhY2soKTtcbiAgICAkdHJhY2sgPSAkKCcudHJhY2syJyk7XG4gICAgaW5kZXggPSAkKCcudHJhY2syLnBsYXllcicpLmluZGV4KCk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgaWYocGxheWVyT25lVHJhY2tlciA8PSA0KXtcbiAgICAgICAgYWlSZWcoKTtcbiAgICAgIH1lbHNlIGlmKHBsYXllck9uZVRyYWNrZXIgPiA0ICYmIHBsYXllck9uZVRyYWNrZXIgPCAxNSl7XG4gICAgICAgIGFpTW92ZURlY2lkZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSArIDE7XG4gICAgICAgIGlmKGFpTW92ZURlY2lkZXIgPD0gMil7XG4gICAgICAgICAgYWlSZWcoKTtcbiAgICAgICAgfWVsc2UgaWYoYWlNb3ZlRGVjaWRlciA+IDIgJiYgYWlNb3ZlRGVjaWRlciA8PTQgJiYgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAgIGFpQm9vc3QoKTtcbiAgICAgICAgfSBlbHNlIGlmKGFpTW92ZURlY2lkZXIgPiAyICYmIGFpTW92ZURlY2lkZXIgPD00ICYmIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgICBhaVJlZygpO1xuICAgICAgICB9IGVsc2UgaWYoYWlNb3ZlRGVjaWRlciA9PT0gNSAmJiBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICBhaVNhbHQoKTtcbiAgICAgICAgfSBlbHNlIGlmKGFpTW92ZURlY2lkZXIgPT09IDUgJiYgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICAgYWlSZWcoKTtcbiAgICAgICAgfVxuICAgICAgfWVsc2UgaWYocGxheWVyT25lVHJhY2tlciA+PSAxNSl7XG4gICAgICAgIGFpTW92ZURlY2lkZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSArIDE7XG4gICAgICAgIGlmKGFpTW92ZURlY2lkZXIgPD0zICYmIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICBhaUJvb3N0KCk7XG4gICAgICAgIH0gZWxzZSBpZihhaU1vdmVEZWNpZGVyIDw9MyAmJiBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMiAmJiBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICBhaVNhbHQoKTtcbiAgICAgICAgfSBlbHNlIGlmKGFpTW92ZURlY2lkZXIgPD0zICYmIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAyICYmIFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAgIGFpUmVnKCk7XG4gICAgICAgIH0gZWxzZSBpZihhaU1vdmVEZWNpZGVyID4gMyAmJiBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICBhaVNhbHQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhaVJlZygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG4gIH1cbiAgLy8gdmFyaW91cyBldmVudCBsaXN0ZW5lcnMgYmVsb3cuXG5cbiAgLy8gVGhpcyBpcyB0aGUgY2xpY2sgZXZlbnQgZm9yIHRoZSBtb3ZlIGJ1dHRvbiwgd2hlbiBjbGlja2VkIGl0IGZpcmVzIG9mZiB0aGUgZGV0ZXJtaW5lVHVybiBmdW5jdGlvbiB3aGljaCBzZXRzIGluIG1vdGlvbiB0aGUgbG9jYXRlR2FyeSBhbmQgbW92ZUdhcnkgZnVuY3Rpb25zLiBOb3cgaGFzIGEgc2VwZXJhdGUgcGFydCBmb3IgdGhlIDEgdmVyc2lvbiB3aGljaCBza2lwcyB0aGUgdHVybiBjaGVja2VyLlxuICBmdW5jdGlvbiBtb3ZlRXZlbnQoKXtcbiAgICBpZighaXNPbmVQbGF5ZXIpe1xuICAgICAgJG1vdmUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBkZXRlcm1pbmVUdXJuKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYoaXNPbmVQbGF5ZXIpIHtcbiAgICAgICRtb3ZlLm9uKCdjbGljaycsKCkgPT57XG4gICAgICAgICR0cmFjayA9ICQoJy50cmFjazEnKTtcbiAgICAgICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyB0aGlzIGlzIHRoZSBjbGljayBldmVudCBmb3IgdGhlIGJvb3N0IGJ1dHRvbiwgd2hlbiBjbGlja2VkIGl0IGNoZWNrcyBmaXJzdCB0byBzZWUgaWYgdGhlIHBsYXllciBoYXMgYWxyZWFkeSB1c2VkIHRoZWlyIGJvb3N0LCBpZiBub3QgaXQgdXBkYXRlcyB0aGF0IGluZm9ybWF0aW9uIGFuZCBydW5zIHRoZSBkZXRlcm1pbmVUdXJuIGZ1bmN0aW9uIGxpa2UgYSBub3JtYWwgbW92ZSwgd2hlbiB0aGlzIHJlYWNoZXMgdGhlIGxvY2F0ZUdhcnkgZnVuY3Rpb24sIGl0IHRha2VzIG5vdGUgdGhhdCB0aGUgYm9vc3QgaGFzIGJlZW4gdXNlZCB0byBmaXJlIG9mZiB0aGUgYm9vc3RHYXJ5IGZ1bmN0aW9uIGluc3RlYWQgb2YgdGhlIG1vdmVHYXJ5IGZ1bmN0aW9uLiBJdCB0aGVuIHVwZGF0ZXMgdGhlIGJvb3N0IHJlbWFpbmluZyBhZ2Fpbiwgc28gdGhhdCBpZiBhbm90aGVyIGJvb3N0IGlzIGF0dGVtcHRlZCwgaXQgaW5mb3JtcyB0aGUgdXNlciB0aGF0IHRoZWlyIGJvb3N0IGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cbiAgZnVuY3Rpb24gYm9vc3RFdmVudCgpe1xuICAgIGlmKCFpc09uZVBsYXllcil7XG4gICAgICAkYm9vc3Qub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgICAgICBpZihQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICAgICAkYm9vc3RTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICBQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9IDA7XG4gICAgICAgICAgICBkZXRlcm1pbmVUdXJuKCk7XG4gICAgICAgICAgfSBlbHNlIGlmKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgICAgICRlcnJvclNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMSBib29zdCBhbHJlYWR5IHVzZWQhJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgICAgICBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICAgICAkYm9vc3RTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9IDA7XG4gICAgICAgICAgICBkZXRlcm1pbmVUdXJuKCk7XG4gICAgICAgICAgfSBlbHNlIGlmKFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgICAgICRlcnJvclNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMiBib29zdCBhbHJlYWR5IHVzZWQhJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYoaXNPbmVQbGF5ZXIpe1xuICAgICAgJGJvb3N0Lm9uKCdjbGljaycsKCkgPT57XG4gICAgICAgIGlmKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICAkdHJhY2sgPSAkKCcudHJhY2sxJyk7XG4gICAgICAgICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgICAgICAgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPSAyO1xuICAgICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMSB1c2VzIGJvb3N0IScpO1xuICAgICAgICAgIGJvb3N0R2FyeSgpO1xuICAgICAgICB9IGVsc2UgaWYgKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgICAkZXJyb3JTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGhhcyBhbHJlYWR5IHVzZWQgYm9vc3QhJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGJlbG93IGlzIHRoZSBldmVudCBsaXN0ZW5lciBmb3IgdGhlIHNhbHQgYWJpbGl0eS4gVXNpbmcgdGhpcyB3aWxsIHN0b3AgeW91ciBvcHBvbmVudHMgbmV4dCB0dXJuIGFuZCBnaXZlIGdhcnkgYSBub3JtYWwgZ2FyeU1vdmUgd2hpbGUgdXNpbmcgaXQuIElmIGEgcGxheWVyIGhhcyBhbHJlYWR5IHVzZWQgdGhlaXIgc2FsdCBpdCBpbmZvcm1zIHRoZW0gb24gdGhlICR0dXJuVGV4dCBmZWVkYmFjay5cbiAgZnVuY3Rpb24gc2FsdEV2ZW50KCl7XG4gICAgaWYoIWlzT25lUGxheWVyKXtcbiAgICAgICRzYWx0Lm9uKCdjbGljaycsKCkgPT4ge1xuICAgICAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgICAgICBpZihQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICAgICRzYWx0U291bmQucGxheSgpO1xuICAgICAgICAgICAgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9IDA7XG4gICAgICAgICAgICBzYWx0R2FyeSgpO1xuICAgICAgICAgIH0gZWxzZSBpZihQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgICAgICRlcnJvclNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMSBoYXMgYWxyZWFkeSB1c2VkIFNhbHQhJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYoIXBsYXllck9uZVR1cm4pe1xuICAgICAgICAgIGlmKFBsYXllclR3b1NhbHRSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAgICAgJHNhbHRTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID0gMDtcbiAgICAgICAgICAgIHNhbHRHYXJ5KCk7XG4gICAgICAgICAgfSBlbHNlIGlmKFBsYXllclR3b1NhbHRSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyIGhhcyBhbHJlYWR5IHVzZWQgU2FsdCEnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZihpc09uZVBsYXllcil7XG4gICAgICAkc2FsdC5vbignY2xpY2snLCgpID0+IHtcbiAgICAgICAgaWYoUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICAgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9IDA7XG4gICAgICAgICAgJHNhbHRTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgc2FsdEdhcnkoKTtcbiAgICAgICAgfSBlbHNlIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09Mil7XG4gICAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMSBoYXMgYWxyZWFkeSB1c2VkIFNhbHQhJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsaWNrIGV2ZW50IHRvIHN0YXJ0IHRoZSBnYW1lLCByZW1vdmVzIHRoZSBpbnN0cnVjdGlvbiBwYWdlIGFuZCB0aGVuIHNob3dzIHRoZSByYWNldHJhY2ssIGZlZWRiYWNrIGJveCBhbmQgY29udHJvbGxlci4gSGF2ZSBtb3ZlZCBldmVudHMgdGhhdCBoYXBwZW4gaW4gYm90aCB0byB0aGUgYWx3YXN5IG9uIHN0YXJ0IGZ1bmN0aW9uLlxuXG4gICRzdGFydC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgYWx3YXlzT25TdGFydCgpO1xuICB9KTtcblxuICAvLyBjbGljayBldmVudCB0byBzdGFydCB0aGUgMXAgb3B0aW9uLlxuICAkc3RhcnQxUGxheWVyLm9uKCdjbGljaycsKCkgPT4ge1xuICAgIGlzT25lUGxheWVyID0gdHJ1ZTtcbiAgICBhbHdheXNPblN0YXJ0KCk7XG4gICAgJHR1cm5UZXh0LnRleHQoJ01ha2UgeW91ciBmaXJzdCBtb3ZlIScpO1xuXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGFsd2F5c09uU3RhcnQoKXtcbiAgICAkaW5zdHJ1Y3Rpb25zLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJGJvYXJkLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJGNvbnRyb2xsZXIucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICBtb3ZlRXZlbnQoKTtcbiAgICBib29zdEV2ZW50KCk7XG4gICAgc2FsdEV2ZW50KCk7XG4gICAgJGF1ZGlvVGhlbWUucGxheSgpO1xuICB9XG5cbiAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIHRoZSByZXNldCBidXR0b24sIGl0IGJhc2ljYWxseSBoaWRlcyBhbGwgb2YgdGhlIGZlZWRiYWNrIGZyb20gdGhlIHJlbWFpbmluZyBnYW1lIGFuZCBtb3ZlcyBib3RoIHBsYXllciBpY29ucyBiYWNrIHRvIHRoZSBzdGFydCBsaW5lLCBpdCBhbHNvIHJlc2V0cyB0aGUgc2FsdCBhbmQgYm9vc3QgY291bnRlcnMgdG8gMSBzbyB0aGF0IHRoZXkgY2FuIG5vdyBiZSB1c2VkIGFnYWluLiBmdW5uY3Rpb24gYmVsb3cgdGhhdCBpcyBzb21lIHJlZmFjdG9yaW5nIGZvciBjb21tYW5kcyB0aGF0IGhhcHBlbiByZWdhcmRsZXNzIG9mIDFwIG9yIDJwIG1vZGUuXG5cbiAgaWYoIWlzT25lUGxheWVyKXtcbiAgICAkcmVzZXQub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgICBhbHdheXNPblJlc2V0KCk7XG4gICAgICAkKCcucGxheWVyVHdvV2luJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmKGlzT25lUGxheWVyKXtcbiAgICAkcmVzZXQub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgICBhbHdheXNPblJlc2V0KCk7XG4gICAgICAkKCcuYWlXaW4nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxXFwncyB0aW1lIHRvIHNoaW5lIScpO1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGFsd2F5c09uUmVzZXQoKXtcbiAgICAkKCcudHJhY2sxJykucmVtb3ZlQ2xhc3MoJ3BsYXllciB3aW5uZXInKTtcbiAgICAkKCcuc3RhcnQxJykuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMTtcbiAgICBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0xO1xuICAgICQoJy50cmFjazInKS5yZW1vdmVDbGFzcygncGxheWVyIHdpbm5lcicpO1xuICAgICQoJy5zdGFydDInKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAxO1xuICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAxO1xuICAgIHBsYXllck9uZVRyYWNrZXIgPSBudWxsO1xuICAgICQoJy5jb250cm9sbGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuZmVlZGJhY2snKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICQoJy5yZXN1bHRCb3gnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICQoJy5wbGF5ZXJPbmVXaW4nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICRhdWRpb1RoZW1lLnNyYyA9ICcnO1xuICAgICRhdWRpb1RoZW1lLnNyYyA9ICdzb3VuZHMvY2xvc2luZ190aGVtZS5tcDMnO1xuICAgICRhdWRpb1RoZW1lLnBsYXkoKTtcbiAgfVxufSk7XG4iXX0=
