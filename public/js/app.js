"use strict";$(function(){function a(){F?(L=$(".track1.player").index())>=21&&(e(),b.addClass("player"),b.addClass("winner"),$(".playerOneWin").removeClass("hide"),$(".aiWin").addClass("hide")):F||(L=$(".track2.player").index())>=21&&(e(),q.addClass("player"),q.addClass("winner"),Q?Q&&$(".aiWin").removeClass("hide"):$(".playerTwoWin").removeClass("hide"))}function e(){D.play(),g.addClass("hide"),S.addClass("hide"),w.removeClass("hide"),_.removeClass("hide")}function s(){F?(r(),F=!1,E=$(".track2"),P.text("Player 2's Turn")):F||(r(),F=!0,E=$(".track1"),P.text("Player 1's Turn"))}function r(){F?(L=$(".track1.player").index(),H>0?(j.play(),l()):0===H&&(n(),H=2)):F||(L=$(".track2.player").index(),I>0?(z.play(),l()):0===I&&(n(),I=2))}function l(){Q?Q&&(j.play(),P.text("Player 1 get's moving!"),E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),a(),(L=$(".track1.player").index())<21&&y()):(E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),a())}function n(){Q?Q&&(B.play(),E.eq(L).removeClass("player"),E.eq(L+5).addClass("player"),a(),(L=$(".track1.player").index())<21&&y()):(E.eq(L).removeClass("player"),E.eq(L+5).addClass("player"),a())}function t(){Q?Q&&0===J&&(F=!0,E=$(".track1"),L=$(".track1.player").index(),P.text("Mecha Gary has been salted!   Player 1 moves again!"),E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),J=2,a()):0===J?(J=2,F=!0,L=$(".track1.player").index(),P.text("Player 2 has been salted! Player 1 moves again!"),l()):0===K&&(K=2,P.text("Player 1 has been salted!   Player 2 moves again!"),L=$(".track2.player").index(),l())}function o(){P.text("Mecha Gary has salted you, he moves again!"),O.play(),K=2,E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),setTimeout(function(){i()},1e3),F=!1,a(),F=!0,c()}function d(){B.play(),E.eq(L).removeClass("player"),E.eq(L+5).addClass("player"),P.text("Mecha Gary has boosted!   Player 1's turn "),F=!1,I=2,a(),F=!0,c()}function i(){z.play(),E.eq(L).removeClass("player"),E.eq(L+(Math.floor(3*Math.random())+1)).addClass("player"),P.text("Mecha Gary has made his move!   Player 1's turn"),F=!1,a(),F=!0,c()}function c(){L=$(".track1.player").index(),N=L}function y(){c(),E=$(".track2"),L=$(".track2.player").index(),setTimeout(function(){N<=4?i():N>4&&N<15?(R=Math.floor(5*Math.random())+1,R<=2?i():R>2&&R<=4&&1===I?d():R>2&&R<=4&&2===H?i():5===R&&1===K?o():5===R&&2===K&&i()):N>=15&&(R=Math.floor(5*Math.random())+1,R<=3&&1===I?d():R<=3&&2===I&&1===K?o():R<=3&&2===I&&2===J?i():R>3&&1===J?o():i())},1e3)}function u(){Q?Q&&k.on("click",function(){E=$(".track1"),L=$(".track1.player").index(),l()}):k.on("click",function(){s()})}function p(){Q?Q&&x.on("click",function(){1===H?(E=$(".track1"),L=$(".track1.player").index(),H=2,P.text("Player 1 uses boost!"),n()):2===H&&(A.play(),P.text("Player 1 has already used boost!"))}):x.on("click",function(){F?1===H?(B.play(),H=0,s()):2===H&&(A.play(),P.text("Player 1 boost already used!")):F||(1===I?(B.play(),I=0,s()):2===I&&(A.play(),P.text("Player 2 boost already used!")))})}function h(){Q?Q&&M.on("click",function(){1===J?(J=0,O.play(),t()):2===J&&(A.play(),P.text("Player 1 has already used Salt!"))}):M.on("click",function(){F?1===J?(O.play(),J=0,t()):2===J&&(A.play(),P.text("Player 1 has already used Salt!")):F||(1===K?(O.play(),K=0,t()):2===K&&(A.play(),P.text("Player 2 has already used Salt!")))})}function m(){W.addClass("hide"),T.removeClass("hide"),S.removeClass("hide"),g.removeClass("hide"),u(),p(),h(),G.play()}function f(){$(".track1").removeClass("player winner"),$(".start1").addClass("player"),H=1,J=1,$(".track2").removeClass("player winner"),$(".start2").addClass("player"),I=1,K=1,N=null,$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),$(".resultBox").addClass("hide"),$(".playerOneWin").addClass("hide"),G.src="",G.src="sounds/closing_theme.mp3",G.play()}var C=$(".startbtn2"),v=$(".startbtn1"),k=$(".move"),x=$(".boost"),M=$(".salt"),P=$(".turn"),b=$(".finish1"),q=$(".finish2"),g=$(".feedback"),S=$(".controller"),w=$(".reset"),_=$(".resultBox"),W=$(".instructions"),T=$(".board"),G=$(".theme")[0];G.src="sounds/closing_theme.mp3";var B=$(".boostSound")[0];B.src="sounds/boost_sound.mp3";var O=$(".saltSound")[0];O.src="sounds/salt_sound.mp3";var j=$(".moveSound")[0];j.src="sounds/move_sound.mp3";var z=$(".moveSound2")[0];z.src="sounds/move_sound2.mp3";var A=$(".errorSound")[0];A.src="sounds/error_sound.mp3";var D=$(".winSound")[0];D.src="sounds/winning_sound.mp3";var E=$(".track1"),F=!0,H=1,I=1,J=1,K=1,L=null,N=null,Q=!1,R=null;C.on("click",function(){m()}),v.on("click",function(){Q=!0,m(),P.text("Make your first move!")}),Q?Q&&w.on("click",function(){f(),$(".aiWin").addClass("hide"),P.text("Player 1's time to shine!")}):w.on("click",function(){f(),$(".playerTwoWin").addClass("hide")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY2hlY2tXaW5uZXIiLCJwbGF5ZXJPbmVUdXJuIiwiaW5kZXgiLCIkZmluaXNoMSIsImFsd2F5c09uV2luIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIiRmaW5pc2gyIiwiaXNPbmVQbGF5ZXIiLCIkd2luU291bmQiLCJwbGF5IiwiJGZlZWRiYWNrIiwiJGNvbnRyb2xsZXIiLCJkZXRlcm1pbmVUdXJuIiwibG9jYXRlR2FyeSIsIiR0dXJuVGV4dCIsIm1vdmVHYXJ5IiwiJG1vdmVTb3VuZCIsIlBsYXllck9uZUJvb3N0UmVtYWluaW5nIiwiUGxheWVyVHdvQm9vc3RSZW1haW5pbmciLCIkbW92ZVNvdW5kVHdvIiwiZXEiLCJ0ZXh0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiJHRyYWNrIiwiYm9vc3RHYXJ5IiwiJGJvb3N0U291bmQiLCJzYWx0R2FyeSIsIlBsYXllck9uZVNhbHRSZW1haW5pbmciLCJQbGF5ZXJUd29TYWx0UmVtYWluaW5nIiwiYWlTYWx0IiwiJHNhbHRTb3VuZCIsInNldFRpbWVvdXQiLCJhaVJlZyIsImFpQm9vc3QiLCJwbGF5ZXJPbmVUcmFjayIsImFpTW92ZSIsImFpTW92ZURlY2lkZXIiLCJwbGF5ZXJPbmVUcmFja2VyIiwibW92ZUV2ZW50IiwiJG1vdmUiLCJvbiIsImJvb3N0RXZlbnQiLCIkYm9vc3QiLCIkZXJyb3JTb3VuZCIsInNhbHRFdmVudCIsIiRzYWx0IiwiYWx3YXlzT25TdGFydCIsIiRpbnN0cnVjdGlvbnMiLCIkYm9hcmQiLCJhbHdheXNPblJlc2V0Iiwic3JjIiwiJGF1ZGlvVGhlbWUiLCIkc3RhcnQiLCIkc3RhcnQxUGxheWVyIiwiJHJlc2V0IiwiJHJlc3VsdEJveCJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0E0Q0EsUUFBU0MsS0FEVEMsR0FDQUMsRUFBU0YsRUFBQUEsa0JBQWFFLFVBQ2pCRCxLQUNEQyxJQUNBQyxFQUFHRCxTQUFZLFVBQ2JFLEVBQUFBLFNB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V29CLElBQU0sdUJBQ2pCLElBQU1wQyxHQUFlbEIsRUFBQSxlQUFyQixFQUNBa0IsR0FBQW9DLElBQWlCLHdCQUNqQixJQUFNakMsR0FBZ0JyQixFQUFFLGVBQWUsRUFDdkNxQixHQUFBQSxJQUFBLHdCQUNBLElBQU0wQixHQUFjL0MsRUFBRSxhQUFGLEVBQ3BCK0MsR0FBQUEsSUFBQSwwQkFFQXJDLElBQUFBLEdBQUFWLEVBQUEsV0FDQUUsR0FBQSxFQUNJeUIsRUFBSixFQUNJekIsRUFBSixFQUNJaUIsRUFBQUEsRUFDQUMsRUFBQUEsRUFDQVcsRUFBQUEsS0FDQUMsRUFBQUEsS0FDQTdCLEdBQUosRUFDSXNDLEVBQUFBLElBK1RKZSxHQUFPWixHQUFHLFFBQVMsV0FBbkJZLE1BSUFDLEVBQUFiLEdBQUEsUUFBQSxXQUNBYSxHQUFBLEVBQ0VoRCxJQUNBeUMsRUFBQUEsS0FBQUEsMkJBaUJFekMsRUFDRkEsR0FERmlELEVBS09kLEdBQUduQyxRQUFBQSxXQUNSaUQsSUFDRUwsRUFBQUEsVUFBQUEsU0FBQUEsUUFDQXJELEVBQUF1QixLQUFZaEIsK0JBUmhCbUQsRUFBSWpELEdBQUFBLFFBQVksV0FDZGlELElBQ0VMLEVBQUFBLGlCQUFBQSxTQUFBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgLy8gTGlzdCBvZiB2YXJpYWJsZXMgbmVlZGVkIGZvciB0aGUgZ2FtZVxuICBjb25zdCAkc3RhcnQgPSAkKCcuc3RhcnRidG4yJyk7XG4gIGNvbnN0ICRzdGFydDFQbGF5ZXIgPSAkKCcuc3RhcnRidG4xJyk7XG4gIGNvbnN0ICRtb3ZlID0gJCgnLm1vdmUnKTtcbiAgY29uc3QgJGJvb3N0ID0gJCgnLmJvb3N0Jyk7XG4gIGNvbnN0ICRzYWx0ID0gJCgnLnNhbHQnKTtcbiAgY29uc3QgJHR1cm5UZXh0ID0gJCgnLnR1cm4nKTtcbiAgY29uc3QgJGZpbmlzaDEgPSAkKCcuZmluaXNoMScpO1xuICBjb25zdCAkZmluaXNoMiA9ICQoJy5maW5pc2gyJyk7XG4gIGNvbnN0ICRmZWVkYmFjayA9ICQoJy5mZWVkYmFjaycpO1xuICBjb25zdCAkY29udHJvbGxlciA9ICQoJy5jb250cm9sbGVyJyk7XG4gIGNvbnN0ICRyZXNldCA9ICQoJy5yZXNldCcpO1xuICBjb25zdCAkcmVzdWx0Qm94ID0gJCgnLnJlc3VsdEJveCcpO1xuICBjb25zdCAkaW5zdHJ1Y3Rpb25zID0gJCgnLmluc3RydWN0aW9ucycpO1xuICBjb25zdCAkYm9hcmQgPSAkKCcuYm9hcmQnKTtcbiAgLy8gQXVkaW8gdmFyaWFibGVzLlxuICBjb25zdCAkYXVkaW9UaGVtZSA9ICQoJy50aGVtZScpWzBdO1xuICAkYXVkaW9UaGVtZS5zcmMgPSAnc291bmRzL2Nsb3NpbmdfdGhlbWUubXAzJztcbiAgY29uc3QgJGJvb3N0U291bmQgPSAkKCcuYm9vc3RTb3VuZCcpWzBdO1xuICAkYm9vc3RTb3VuZC5zcmMgPSAnc291bmRzL2Jvb3N0X3NvdW5kLm1wMyc7XG4gIGNvbnN0ICRzYWx0U291bmQgPSAkKCcuc2FsdFNvdW5kJylbMF07XG4gICRzYWx0U291bmQuc3JjID0gJ3NvdW5kcy9zYWx0X3NvdW5kLm1wMyc7XG4gIGNvbnN0ICRtb3ZlU291bmQgPSAkKCcubW92ZVNvdW5kJylbMF07XG4gICRtb3ZlU291bmQuc3JjID0gJ3NvdW5kcy9tb3ZlX3NvdW5kLm1wMyc7XG4gIGNvbnN0ICRtb3ZlU291bmRUd28gPSAkKCcubW92ZVNvdW5kMicpWzBdO1xuICAkbW92ZVNvdW5kVHdvLnNyYyA9ICdzb3VuZHMvbW92ZV9zb3VuZDIubXAzJztcbiAgY29uc3QgJGVycm9yU291bmQgPSAkKCcuZXJyb3JTb3VuZCcpWzBdO1xuICAkZXJyb3JTb3VuZC5zcmMgPSAnc291bmRzL2Vycm9yX3NvdW5kLm1wMyc7XG4gIGNvbnN0ICR3aW5Tb3VuZCA9ICQoJy53aW5Tb3VuZCcpWzBdO1xuICAkd2luU291bmQuc3JjID0gJ3NvdW5kcy93aW5uaW5nX3NvdW5kLm1wMyc7XG4gIC8vIFZhcmlhYmxlcyB0aGF0IHVwZGF0ZSBkdXJpbmcgdGhlIGdhbWUsIGJhc2VkIG9uIHR1cm4vYWJpbHRpZXMgdXNlZC5cbiAgbGV0ICR0cmFjayA9ICQoJy50cmFjazEnKTtcbiAgbGV0IHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICBsZXQgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPSAxO1xuICBsZXQgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAxO1xuICBsZXQgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9IDE7XG4gIGxldCBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID0gMTtcbiAgbGV0IGluZGV4ID0gbnVsbDtcbiAgbGV0IHBsYXllck9uZVRyYWNrZXIgPSBudWxsO1xuICBsZXQgaXNPbmVQbGF5ZXIgPSBmYWxzZTtcbiAgbGV0IGFpTW92ZURlY2lkZXIgPSBudWxsO1xuXG4gIC8vIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIHRvIHNlZSBpZiBlaXRoZXIgcGxheWVyIGlzIGluIGEgd2lubmluZyBwb3NpdGlvbiwgcG9zdGlvbiBpcyBkZXRlcm1pbmVzIGlmIHRoZSBpbmRleCBvZiB0aGUgb2NjdXBpZWQgc3BhY2UgaXMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIDIxKHRoZSBmaW5pc2ggbGluZSksIHRoZXJlIGFyZSBoaWRkZW4gcnVuIG9mZiBib3hlcyB0aGF0IGFsc28gZXZhdWxhdGUgdGhlIHdpbm5lciBpZiB0aGUgZmluYWwgbW92ZSB3b3VsZCBvZiB0YWtlIHRoZW4gcGxheWVyIHBhc3NlZCBpbmRleCAyMS5cbiAgZnVuY3Rpb24gY2hlY2tXaW5uZXIoKXtcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoaW5kZXggPj0gMjEpe1xuICAgICAgICBhbHdheXNPbldpbigpO1xuICAgICAgICAkZmluaXNoMS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgICAgICRmaW5pc2gxLmFkZENsYXNzKCd3aW5uZXInKTtcbiAgICAgICAgJCgnLnBsYXllck9uZVdpbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5haVdpbicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKCFwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMi5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoaW5kZXggPj0gMjEpe1xuICAgICAgICBhbHdheXNPbldpbigpO1xuICAgICAgICAkZmluaXNoMi5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgICAgICRmaW5pc2gyLmFkZENsYXNzKCd3aW5uZXInKTtcbiAgICAgICAgaWYoIWlzT25lUGxheWVyKXtcbiAgICAgICAgICAkKCcucGxheWVyVHdvV2luJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgfSBlbHNlIGlmKGlzT25lUGxheWVyKXtcbiAgICAgICAgICAkKCcuYWlXaW4nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIHJlZmFjdG9yZWQgYXMgdGhlc2UgZXZlbnRzIGFsd2F5cyBoYXBwZW4gcmVnYXJkbGVzcyBvZiB3aG8gd2lucy5cbiAgZnVuY3Rpb24gYWx3YXlzT25XaW4oKXtcbiAgICAkd2luU291bmQucGxheSgpO1xuICAgICRmZWVkYmFjay5hZGRDbGFzcygnaGlkZScpO1xuICAgICRjb250cm9sbGVyLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJHJlc2V0LnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJHJlc3VsdEJveC5yZW1vdmVDbGFzcygnaGlkZScpO1xuICB9XG5cbiAgLy8gdGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIHdob3MgdHVybiBpdCBpcyBhbmQgdXBkYXRlcyB0aGUgb24gc2NyZWVuIHBvcm1wdCBhY2NvcmRpbmdseSwgaXQgaXMgZmlyZWQgZGlyZWN0bHkgYWZ0ZXIgdGhlIGNsaWNrIGV2ZW50IG9uIG1vdmUsIGFuZCBpdCBmaXJlZCBpZiBhIGJvb3N0IGhhcHBlbnMgYWZ0ZXIgdXBkYXRpbmcgdGhlIGJvb3N0IGJvb2xlYW4sIGl0IHdvcmtzIG9uIHRoZSBvbmUgdmFyaWFibGUgd2hpY2ggZ2V0cyB1cGRhdGVkIG9mIHBsYXllck9uZVR1cm4gZnJvbSB0cnVlIHRvIGZhbHNlLlxuICBmdW5jdGlvbiBkZXRlcm1pbmVUdXJuKCl7XG4gICAgaWYocGxheWVyT25lVHVybil7XG4gICAgICBsb2NhdGVHYXJ5KCk7XG4gICAgICBwbGF5ZXJPbmVUdXJuID0gZmFsc2U7XG4gICAgICAkdHJhY2sgPSAkKCcudHJhY2syJyk7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDJcXCdzIFR1cm4nKTtcbiAgICB9IGVsc2UgaWYoIXBsYXllck9uZVR1cm4pe1xuICAgICAgbG9jYXRlR2FyeSgpO1xuICAgICAgcGxheWVyT25lVHVybiA9IHRydWU7XG4gICAgICAkdHJhY2sgPSAkKCcudHJhY2sxJyk7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDFcXCdzIFR1cm4nKTtcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGZ1bmN0aW9uIGxvY2F0ZXMgZ2FyeSBvbiB0aGUgYm9hcmQsIHRoZSBzZXBlcmF0ZSBwYXJ0cyBvZiB0aGUgaWYgZWxzZSBzdGF0ZW1lbnQgcnVuIGJhc2VkIG9uIHdoaWNoIHBsYXllcnMgdHVybiBpdCBpcywgb25jZSBkb2luZyBzbyBpdCBmaXJlcyBvZmYgdGhlIG1vdmVHYXJ5IGZ1bmN0aW9uLiBPciBpZiBpdCBkZXRlY3RzIHRoZSBib29zdCBoYXMgYmVlbiB1c2VkKGJ5IGl0IHVwZGF0aW5nIGZyb20gMSB0byAwIG9uIHRoZSBib29zdCBidXR0b24gY2xpY2spIGlmIGZpcmVzIG9mZiB0aGUgYm9vc3RHYXJ5IGZ1bmN0aW9uIGluc3RlYWQsIGl0IHRoZW4gdXBkYXRlcyB0aGUgYm9vc3QgY291bnQgdG8gMiB3aGljaCBpbmZvcm1zIHRoZSB1c2VyIHRoZSBib29zdCBoYXMgYmVlbiB1c2VkIHdoZW4gY2xpY2tlZCBhZ2Fpbi5cbiAgZnVuY3Rpb24gbG9jYXRlR2FyeSgpe1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBpZihQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA+IDApe1xuICAgICAgICAkbW92ZVNvdW5kLnBsYXkoKTtcbiAgICAgICAgbW92ZUdhcnkoKTtcbiAgICAgIH0gZWxzZSBpZihQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBib29zdEdhcnkoKTtcbiAgICAgICAgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPSAyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXBsYXllck9uZVR1cm4pe1xuICAgICAgaW5kZXggPSAkKCcudHJhY2syLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA+IDApe1xuICAgICAgICAkbW92ZVNvdW5kVHdvLnBsYXkoKTtcbiAgICAgICAgbW92ZUdhcnkoKTtcbiAgICAgIH1lbHNlIGlmKFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGJvb3N0R2FyeSgpO1xuICAgICAgICBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9IDI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyBmdW5jdGlvbiBtb3ZlcyBnYXJ5LCBpdCBmaXJzdCBkZXRlcm1pbmVzIGlmIGl0IGlzIGEgcmVndWxhciBtb3ZlIG9yIGEgYm9vc3QgbW92ZSwgaWYgaXQgaXMgYSByZWd1bGFyIG1vdmUgaXQgbW92ZXMgdGhlIGN1cnJlbnQgcGxheWVycyBHYXJ5IGJldHdlZW4gMSBhbmQgMyBpbmRleCBzcGFjZXMgYWxvbmcsIGZpbmFsbHksIGl0IHJ1bnMgdGhlIGNoZWNrV2lubmVyIGZ1bmN0aW9uIHRvIHNlZSBpZiBhIHdpbiBjb25kaXRpb24gaGFzIGJlZW4gbWV0LlxuICBmdW5jdGlvbiBtb3ZlR2FyeSgpIHtcbiAgICBpZighaXNPbmVQbGF5ZXIpe1xuICAgICAgJHRyYWNrLmVxKGluZGV4KS5yZW1vdmVDbGFzcygncGxheWVyJyk7XG4gICAgICAkdHJhY2suZXEoaW5kZXggKyAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMykgKyAxICkgKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgICBjaGVja1dpbm5lcigpO1xuICAgIH0gZWxzZSBpZihpc09uZVBsYXllcil7XG4gICAgICAkbW92ZVNvdW5kLnBsYXkoKTtcbiAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMSBnZXRcXCdzIG1vdmluZyEnKTtcbiAgICAgICR0cmFjay5lcShpbmRleCkucmVtb3ZlQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgJHRyYWNrLmVxKGluZGV4ICsgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMSApICkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgY2hlY2tXaW5uZXIoKTtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoaW5kZXggPCAyMSl7XG4gICAgICAgIGFpTW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgZnVuY3Rpb24gZmlyZXMgb2ZmIGlmIHRoZSBib29zdCBidXR0b24gaXMgY2xpY2tlZCBvbiwgdGhlIGNsaWNrIGV2ZW50IHVwZGF0ZXMgdGhlIGJvb3N0IGNvdW50IGFuZCB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIHRoZSBsb2NhdGVHYXJ5IGlzIHJ1bm5pbmcuIEl0IGd1YXJlbnRlZXMgdGhlIHVzZXIgYSBtb3ZlIG9mIDUgc3BhY2VzIHRoZW4gcnVucyB0aGUgY2hlY2sgd2lubmVyIGZ1bmN0aW9uIHRvIHNlZSBpZiBhIHdpbiBjb25kaXRpb24gaGFzIGJlZW4gbWV0LiB0aGlzIGlmIGZvciB0aGUgMiBwbGF5ZXIgdmVyc2lvbi5cbiAgZnVuY3Rpb24gYm9vc3RHYXJ5KCkge1xuICAgIGlmKCFpc09uZVBsYXllcil7XG4gICAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAgICR0cmFjay5lcShpbmRleCArIDUpLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICAgIGNoZWNrV2lubmVyKCk7XG4gICAgfSBlbHNlIGlmKGlzT25lUGxheWVyKXtcbiAgICAgICRib29zdFNvdW5kLnBsYXkoKTtcbiAgICAgICR0cmFjay5lcShpbmRleCkucmVtb3ZlQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgJHRyYWNrLmVxKGluZGV4ICsgNSkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgY2hlY2tXaW5uZXIoKTtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoaW5kZXggPCAyMSl7XG4gICAgICAgIGFpTW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgLy8gdGhlIHNhbHRHYXJ5IGZ1bmN0aW9uLiBmb3IgdGhlIDIgcGxheWVyIHZlcnNpb24uXG4gIGZ1bmN0aW9uIHNhbHRHYXJ5KCkge1xuICAgIGlmKCFpc09uZVBsYXllcil7XG4gICAgICBpZihQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID09PSAwKXtcbiAgICAgICAgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9IDI7XG4gICAgICAgIHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICAgICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyIGhhcyBiZWVuIHNhbHRlZCEgUGxheWVyIDEgbW92ZXMgYWdhaW4hJyk7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9PT0gMCl7XG4gICAgICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAyO1xuICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDEgaGFzIGJlZW4gc2FsdGVkISAgIFBsYXllciAyIG1vdmVzIGFnYWluIScpO1xuICAgICAgICBpbmRleCA9ICQoJy50cmFjazIucGxheWVyJykuaW5kZXgoKTtcbiAgICAgICAgbW92ZUdhcnkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoaXNPbmVQbGF5ZXIpe1xuICAgICAgaWYoUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0gMCl7XG4gICAgICAgIHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICAgICAgICAkdHJhY2sgPSAkKCcudHJhY2sxJyk7XG4gICAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgICAkdHVyblRleHQudGV4dCgnTWVjaGEgR2FyeSBoYXMgYmVlbiBzYWx0ZWQhICAgUGxheWVyIDEgbW92ZXMgYWdhaW4hJyk7XG4gICAgICAgICR0cmFjay5lcShpbmRleCkucmVtb3ZlQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgICAkdHJhY2suZXEoaW5kZXggKyAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMykgKyAxICkgKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgICAgIFBsYXllck9uZVNhbHRSZW1haW5pbmcgPSAyO1xuICAgICAgICBjaGVja1dpbm5lcigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBmdW5jdGlvbiBiZWxvdyBpcyBmb3IgdGhlIG9uZSBwbGF5ZXIgbW9kZSwgaXQgdHJhY2tzIHBsYXllciAxcyBwb3N0aW9uIHZpYSB0aGUgaW5kZXggYW5kIHNhdmVzIGl0IGluIHBsYXllciAxIHRyYWNrZXIsIHRoZW4gbWFrZXMgYSBkZXNpY2lvbiBiYXNlZCBvbiB0aGF0IHBvc3Rpb24sIHRoZSBiaWdnZXIgdGhlIG51bWJlciBpbiBwbGF5ZXIgdHJhY2tlciB0aGUgbW9yZSBsaWtlbGluZXNzIG9mIGl0IHVzaW5nIG9uZSBvZiB0aGUgYWJpbGl0eSBtb3Zlcy4gVGhlIGZpcnN0IHRocmVlIGZ1bmN0aW9ucyBkZWZpbmUgdGhlIGFjdHVhbCBtb3ZlIHRvIG1ha2UgaXQgbW9yZSByZWFkYWJsZSBpbiB0aGUgYWN0dWFsIGFpIGRlc2ljaW9uIGZ1bmN0aW9uLiBlYWNoIG1vdmUgY2hhbmdlcyB0byBwbGF5ZXIgMSB0dXJuIGZhbHNlIGJlZm9yZSBjYWxsaW5nIGNoZWNrV2lubmVyIHNvIGNhbiB1c2UgdGhlIHNhbWUgZnVuY3Rpb24gaW4gYm90aCAxIHAgYW5kIDIgcCB2ZXJzaW9uLlxuICBmdW5jdGlvbiBhaVNhbHQoKXtcbiAgICAkdHVyblRleHQudGV4dCgnTWVjaGEgR2FyeSBoYXMgc2FsdGVkIHlvdSwgaGUgbW92ZXMgYWdhaW4hJyk7XG4gICAgJHNhbHRTb3VuZC5wbGF5KCk7XG4gICAgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9IDI7XG4gICAgJHRyYWNrLmVxKGluZGV4KS5yZW1vdmVDbGFzcygncGxheWVyJyk7XG4gICAgJHRyYWNrLmVxKGluZGV4ICsgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMSApICkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIGFpUmVnKCk7XG4gICAgfSwgMTAwMCk7XG4gICAgcGxheWVyT25lVHVybiA9IGZhbHNlO1xuICAgIGNoZWNrV2lubmVyKCk7XG4gICAgcGxheWVyT25lVHVybiA9IHRydWU7XG4gICAgcGxheWVyT25lVHJhY2soKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFpQm9vc3QoKXtcbiAgICAkYm9vc3RTb3VuZC5wbGF5KCk7XG4gICAgJHRyYWNrLmVxKGluZGV4KS5yZW1vdmVDbGFzcygncGxheWVyJyk7XG4gICAgJHRyYWNrLmVxKGluZGV4ICsgNSkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICR0dXJuVGV4dC50ZXh0KCdNZWNoYSBHYXJ5IGhhcyBib29zdGVkISAgIFBsYXllciAxXFwncyB0dXJuICcpO1xuICAgIHBsYXllck9uZVR1cm4gPSBmYWxzZTtcbiAgICBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9IDI7XG4gICAgY2hlY2tXaW5uZXIoKTtcbiAgICBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgICBwbGF5ZXJPbmVUcmFjaygpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWlSZWcoKXtcbiAgICAkbW92ZVNvdW5kVHdvLnBsYXkoKTtcbiAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAkdHJhY2suZXEoaW5kZXggKyAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMykgKyAxICkgKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgJHR1cm5UZXh0LnRleHQoJ01lY2hhIEdhcnkgaGFzIG1hZGUgaGlzIG1vdmUhICAgUGxheWVyIDFcXCdzIHR1cm4nKTtcbiAgICBwbGF5ZXJPbmVUdXJuID0gZmFsc2U7XG4gICAgY2hlY2tXaW5uZXIoKTtcbiAgICBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgICBwbGF5ZXJPbmVUcmFjaygpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheWVyT25lVHJhY2soKXtcbiAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICBwbGF5ZXJPbmVUcmFja2VyID0gaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBhaU1vdmUoKXtcbiAgICBwbGF5ZXJPbmVUcmFjaygpO1xuICAgICR0cmFjayA9ICQoJy50cmFjazInKTtcbiAgICBpbmRleCA9ICQoJy50cmFjazIucGxheWVyJykuaW5kZXgoKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBpZihwbGF5ZXJPbmVUcmFja2VyIDw9IDQpe1xuICAgICAgICBhaVJlZygpO1xuICAgICAgfWVsc2UgaWYocGxheWVyT25lVHJhY2tlciA+IDQgJiYgcGxheWVyT25lVHJhY2tlciA8IDE1KXtcbiAgICAgICAgYWlNb3ZlRGVjaWRlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpICsgMTtcbiAgICAgICAgaWYoYWlNb3ZlRGVjaWRlciA8PSAyKXtcbiAgICAgICAgICBhaVJlZygpO1xuICAgICAgICB9ZWxzZSBpZihhaU1vdmVEZWNpZGVyID4gMiAmJiBhaU1vdmVEZWNpZGVyIDw9NCAmJiBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICAgYWlCb29zdCgpO1xuICAgICAgICB9IGVsc2UgaWYoYWlNb3ZlRGVjaWRlciA+IDIgJiYgYWlNb3ZlRGVjaWRlciA8PTQgJiYgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAgIGFpUmVnKCk7XG4gICAgICAgIH0gZWxzZSBpZihhaU1vdmVEZWNpZGVyID09PSA1ICYmIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAgIGFpU2FsdCgpO1xuICAgICAgICB9IGVsc2UgaWYoYWlNb3ZlRGVjaWRlciA9PT0gNSAmJiBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgICBhaVJlZygpO1xuICAgICAgICB9XG4gICAgICB9ZWxzZSBpZihwbGF5ZXJPbmVUcmFja2VyID49IDE1KXtcbiAgICAgICAgYWlNb3ZlRGVjaWRlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpICsgMTtcbiAgICAgICAgaWYoYWlNb3ZlRGVjaWRlciA8PTMgJiYgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAgIGFpQm9vc3QoKTtcbiAgICAgICAgfSBlbHNlIGlmKGFpTW92ZURlY2lkZXIgPD0zICYmIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAyICYmIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAgIGFpU2FsdCgpO1xuICAgICAgICB9IGVsc2UgaWYoYWlNb3ZlRGVjaWRlciA8PTMgJiYgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPT09IDIgJiYgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICAgYWlSZWcoKTtcbiAgICAgICAgfSBlbHNlIGlmKGFpTW92ZURlY2lkZXIgPiAzICYmIFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAgIGFpU2FsdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFpUmVnKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDAwKTtcbiAgfVxuICAvLyB2YXJpb3VzIGV2ZW50IGxpc3RlbmVycyBiZWxvdy5cblxuICAvLyBUaGlzIGlzIHRoZSBjbGljayBldmVudCBmb3IgdGhlIG1vdmUgYnV0dG9uLCB3aGVuIGNsaWNrZWQgaXQgZmlyZXMgb2ZmIHRoZSBkZXRlcm1pbmVUdXJuIGZ1bmN0aW9uIHdoaWNoIHNldHMgaW4gbW90aW9uIHRoZSBsb2NhdGVHYXJ5IGFuZCBtb3ZlR2FyeSBmdW5jdGlvbnMuIE5vdyBoYXMgYSBzZXBlcmF0ZSBwYXJ0IGZvciB0aGUgMSB2ZXJzaW9uIHdoaWNoIHNraXBzIHRoZSB0dXJuIGNoZWNrZXIuXG4gIGZ1bmN0aW9uIG1vdmVFdmVudCgpe1xuICAgIGlmKCFpc09uZVBsYXllcil7XG4gICAgICAkbW92ZS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGRldGVybWluZVR1cm4oKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZihpc09uZVBsYXllcikge1xuICAgICAgJG1vdmUub24oJ2NsaWNrJywoKSA9PntcbiAgICAgICAgJHRyYWNrID0gJCgnLnRyYWNrMScpO1xuICAgICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgICAgbW92ZUdhcnkoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIHRoaXMgaXMgdGhlIGNsaWNrIGV2ZW50IGZvciB0aGUgYm9vc3QgYnV0dG9uLCB3aGVuIGNsaWNrZWQgaXQgY2hlY2tzIGZpcnN0IHRvIHNlZSBpZiB0aGUgcGxheWVyIGhhcyBhbHJlYWR5IHVzZWQgdGhlaXIgYm9vc3QsIGlmIG5vdCBpdCB1cGRhdGVzIHRoYXQgaW5mb3JtYXRpb24gYW5kIHJ1bnMgdGhlIGRldGVybWluZVR1cm4gZnVuY3Rpb24gbGlrZSBhIG5vcm1hbCBtb3ZlLCB3aGVuIHRoaXMgcmVhY2hlcyB0aGUgbG9jYXRlR2FyeSBmdW5jdGlvbiwgaXQgdGFrZXMgbm90ZSB0aGF0IHRoZSBib29zdCBoYXMgYmVlbiB1c2VkIHRvIGZpcmUgb2ZmIHRoZSBib29zdEdhcnkgZnVuY3Rpb24gaW5zdGVhZCBvZiB0aGUgbW92ZUdhcnkgZnVuY3Rpb24uIEl0IHRoZW4gdXBkYXRlcyB0aGUgYm9vc3QgcmVtYWluaW5nIGFnYWluLCBzbyB0aGF0IGlmIGFub3RoZXIgYm9vc3QgaXMgYXR0ZW1wdGVkLCBpdCBpbmZvcm1zIHRoZSB1c2VyIHRoYXQgdGhlaXIgYm9vc3QgaGFzIGFscmVhZHkgYmVlbiB1c2VkLlxuICBmdW5jdGlvbiBib29zdEV2ZW50KCl7XG4gICAgaWYoIWlzT25lUGxheWVyKXtcbiAgICAgICRib29zdC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgICAgIGlmKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICAgICRib29zdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMDtcbiAgICAgICAgICAgIGRldGVybWluZVR1cm4oKTtcbiAgICAgICAgICB9IGVsc2UgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGJvb3N0IGFscmVhZHkgdXNlZCEnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIXBsYXllck9uZVR1cm4pe1xuICAgICAgICAgIGlmKFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICAgICRib29zdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMDtcbiAgICAgICAgICAgIGRldGVybWluZVR1cm4oKTtcbiAgICAgICAgICB9IGVsc2UgaWYoUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyIGJvb3N0IGFscmVhZHkgdXNlZCEnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZihpc09uZVBsYXllcil7XG4gICAgICAkYm9vc3Qub24oJ2NsaWNrJywoKSA9PntcbiAgICAgICAgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAgICR0cmFjayA9ICQoJy50cmFjazEnKTtcbiAgICAgICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgICAgICBQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9IDI7XG4gICAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIHVzZXMgYm9vc3QhJyk7XG4gICAgICAgICAgYm9vc3RHYXJ5KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAgICRlcnJvclNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDEgaGFzIGFscmVhZHkgdXNlZCBib29zdCEnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gYmVsb3cgaXMgdGhlIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgc2FsdCBhYmlsaXR5LiBVc2luZyB0aGlzIHdpbGwgc3RvcCB5b3VyIG9wcG9uZW50cyBuZXh0IHR1cm4gYW5kIGdpdmUgZ2FyeSBhIG5vcm1hbCBnYXJ5TW92ZSB3aGlsZSB1c2luZyBpdC4gSWYgYSBwbGF5ZXIgaGFzIGFscmVhZHkgdXNlZCB0aGVpciBzYWx0IGl0IGluZm9ybXMgdGhlbSBvbiB0aGUgJHR1cm5UZXh0IGZlZWRiYWNrLlxuICBmdW5jdGlvbiBzYWx0RXZlbnQoKXtcbiAgICBpZighaXNPbmVQbGF5ZXIpe1xuICAgICAgJHNhbHQub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgICAgIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAgICAgJHNhbHRTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0gMDtcbiAgICAgICAgICAgIHNhbHRHYXJ5KCk7XG4gICAgICAgICAgfSBlbHNlIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGhhcyBhbHJlYWR5IHVzZWQgU2FsdCEnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZighcGxheWVyT25lVHVybil7XG4gICAgICAgICAgaWYoUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICAgICAkc2FsdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAwO1xuICAgICAgICAgICAgc2FsdEdhcnkoKTtcbiAgICAgICAgICB9IGVsc2UgaWYoUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICAgICAkZXJyb3JTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDIgaGFzIGFscmVhZHkgdXNlZCBTYWx0IScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmKGlzT25lUGxheWVyKXtcbiAgICAgICRzYWx0Lm9uKCdjbGljaycsKCkgPT4ge1xuICAgICAgICBpZihQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgICBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0gMDtcbiAgICAgICAgICAkc2FsdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgICBzYWx0R2FyeSgpO1xuICAgICAgICB9IGVsc2UgaWYoUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0yKXtcbiAgICAgICAgICAkZXJyb3JTb3VuZC5wbGF5KCk7XG4gICAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGhhcyBhbHJlYWR5IHVzZWQgU2FsdCEnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2xpY2sgZXZlbnQgdG8gc3RhcnQgdGhlIGdhbWUsIHJlbW92ZXMgdGhlIGluc3RydWN0aW9uIHBhZ2UgYW5kIHRoZW4gc2hvd3MgdGhlIHJhY2V0cmFjaywgZmVlZGJhY2sgYm94IGFuZCBjb250cm9sbGVyLiBIYXZlIG1vdmVkIGV2ZW50cyB0aGF0IGhhcHBlbiBpbiBib3RoIHRvIHRoZSBhbHdhc3kgb24gc3RhcnQgZnVuY3Rpb24uXG5cbiAgJHN0YXJ0Lm9uKCdjbGljaycsICgpID0+IHtcbiAgICBhbHdheXNPblN0YXJ0KCk7XG4gIH0pO1xuXG4gIC8vIGNsaWNrIGV2ZW50IHRvIHN0YXJ0IHRoZSAxcCBvcHRpb24uXG4gICRzdGFydDFQbGF5ZXIub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgaXNPbmVQbGF5ZXIgPSB0cnVlO1xuICAgIGFsd2F5c09uU3RhcnQoKTtcbiAgICAkdHVyblRleHQudGV4dCgnTWFrZSB5b3VyIGZpcnN0IG1vdmUhJyk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGFsd2F5c09uU3RhcnQoKXtcbiAgICAkaW5zdHJ1Y3Rpb25zLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJGJvYXJkLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJGNvbnRyb2xsZXIucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICBtb3ZlRXZlbnQoKTtcbiAgICBib29zdEV2ZW50KCk7XG4gICAgc2FsdEV2ZW50KCk7XG4gICAgJGF1ZGlvVGhlbWUucGxheSgpO1xuICB9XG5cbiAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIHRoZSByZXNldCBidXR0b24sIGl0IGJhc2ljYWxseSBoaWRlcyBhbGwgb2YgdGhlIGZlZWRiYWNrIGZyb20gdGhlIHJlbWFpbmluZyBnYW1lIGFuZCBtb3ZlcyBib3RoIHBsYXllciBpY29ucyBiYWNrIHRvIHRoZSBzdGFydCBsaW5lLCBpdCBhbHNvIHJlc2V0cyB0aGUgc2FsdCBhbmQgYm9vc3QgY291bnRlcnMgdG8gMSBzbyB0aGF0IHRoZXkgY2FuIG5vdyBiZSB1c2VkIGFnYWluLiBmdW5uY3Rpb24gYmVsb3cgdGhhdCBpcyBzb21lIHJlZmFjdG9yaW5nIGZvciBjb21tYW5kcyB0aGF0IGhhcHBlbiByZWdhcmRsZXNzIG9mIDFwIG9yIDJwIG1vZGUuXG5cbiAgaWYoIWlzT25lUGxheWVyKXtcbiAgICAkcmVzZXQub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgICBhbHdheXNPblJlc2V0KCk7XG4gICAgICAkKCcucGxheWVyVHdvV2luJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmKGlzT25lUGxheWVyKXtcbiAgICAkcmVzZXQub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgICBhbHdheXNPblJlc2V0KCk7XG4gICAgICAkKCcuYWlXaW4nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxXFwncyB0aW1lIHRvIHNoaW5lIScpO1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGFsd2F5c09uUmVzZXQoKXtcbiAgICAkKCcudHJhY2sxJykucmVtb3ZlQ2xhc3MoJ3BsYXllciB3aW5uZXInKTtcbiAgICAkKCcuc3RhcnQxJykuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMTtcbiAgICBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0xO1xuICAgICQoJy50cmFjazInKS5yZW1vdmVDbGFzcygncGxheWVyIHdpbm5lcicpO1xuICAgICQoJy5zdGFydDInKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAxO1xuICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAxO1xuICAgIHBsYXllck9uZVRyYWNrZXIgPSBudWxsO1xuICAgICQoJy5jb250cm9sbGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuZmVlZGJhY2snKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICQoJy5yZXN1bHRCb3gnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICQoJy5wbGF5ZXJPbmVXaW4nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICRhdWRpb1RoZW1lLnNyYyA9ICcnO1xuICAgICRhdWRpb1RoZW1lLnNyYyA9ICdzb3VuZHMvY2xvc2luZ190aGVtZS5tcDMnO1xuICAgICRhdWRpb1RoZW1lLnBsYXkoKTtcbiAgfVxufSk7XG4iXX0=
