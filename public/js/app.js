"use strict";$(function(){function e(){u?(f=$(".track1.player").index(),console.log(f),f>=21&&($(".feedback").addClass("hide"),y.addClass("player"),y.addClass("winner"),$(".controller").addClass("hide"),$(".playerOneWin").removeClass("hide"),$(".reset").removeClass("hide"),$(".resultBox").removeClass("hide"))):u||(f=$(".track2.player").index(),console.log(f),f>=21&&($(".feedback").addClass("hide"),C.addClass("player"),C.addClass("winner"),$(".controller").addClass("hide"),$(".playerTwoWin").removeClass("hide"),$(".reset").removeClass("hide"),$(".resultBox").removeClass("hide")))}function a(){u?(s(),u=!1,h=$(".track2"),c.text("Player 2's Turn")):u||(s(),u=!0,h=$(".track1"),c.text("Player 1's Turn"))}function s(){u?(f=$(".track1.player").index(),k>0?l():0===k&&(r(),k=2)):u||(f=$(".track2.player").index(),p>0?l():0===p&&(r(),p=2))}function l(){h.eq(f).removeClass("player"),h.eq(f+(Math.floor(3*Math.random())+1)).addClass("player"),e()}function r(){h.eq(f).removeClass("player"),h.eq(f+5).addClass("player"),e()}function d(){0===m?(m=2,u=!0,f=$(".track1.player").index(),c.text("Player 2 has been salted! Player 1 moves again!"),l()):0===v&&(v=2,c.text("Player 1 has been salted! Player 2 moves again!"),f=$(".track2.player").index(),l())}var t=$(".start"),n=$(".move"),o=$(".boost"),i=$(".salt"),c=$(".turn"),y=$(".finish1"),C=$(".finish2"),h=$(".track1"),u=!0,k=1,p=1,m=1,v=1,f=null;n.on("click",a),o.on("click",function(){u?1===k?(k=0,a()):2===k&&c.text("Player 1 boost already used!"):u||(1===p?(p=0,a()):2===p&&c.text("Player 2 boost already used!"))}),i.on("click",function(){u?1===m?(m=0,d()):2===m&&c.text("Player 1 has already used Salt!"):u||(1===v?(v=0,d()):2===v&&c.text("Player 2 has already used Salt!"))}),t.on("click",function(){$(".instructions").addClass("hide"),$(".board").removeClass("hide"),$(".controller").removeClass("hide"),$(".feedback").removeClass("hide")}),$(".reset").on("click",function(){$(".track1").removeClass("player winner"),$(".start1").addClass("player"),k=1,m=1,$(".track2").removeClass("player winner"),$(".start2").addClass("player"),p=1,v=1,$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),$(".resultBox").addClass("hide"),$(".playerOneWin").addClass("hide"),$(".playerTwoWin").addClass("hide")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY2hlY2tXaW5uZXIiLCJwbGF5ZXJPbmVUdXJuIiwiaW5kZXgiLCJjb25zb2xlIiwiYWRkQ2xhc3MiLCIkZmluaXNoMSIsInJlbW92ZUNsYXNzIiwibG9nIiwiJGZpbmlzaDIiLCJkZXRlcm1pbmVUdXJuIiwibG9jYXRlR2FyeSIsIiR0dXJuVGV4dCIsIlBsYXllck9uZUJvb3N0UmVtYWluaW5nIiwibW92ZUdhcnkiLCJQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyIsIiR0cmFjayIsImVxIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYm9vc3RHYXJ5Iiwic2FsdEdhcnkiLCJQbGF5ZXJPbmVTYWx0UmVtYWluaW5nIiwiUGxheWVyVHdvU2FsdFJlbWFpbmluZyIsIiRzdGFydCIsIiRtb3ZlIiwiJGJvb3N0IiwiJHNhbHQiLCJvbiJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FtQkEsUUFBU0MsS0FEVEMsR0FDQUMsRUFBU0YsRUFBQUEsa0JBQWFFLFFBQ3BCQyxRQUFHRixJQUFBQSxHQUNEQyxHQUFVLEtBQ1ZDLEVBQUFBLGFBQUFDLFNBQUEsUUFDQUMsRUFBR0gsU0FBWSxVQUNiSCxFQUFFSyxTQUFhQSxVQUNmQyxFQUFBQSxlQUFBRCxTQUFBLFFBQ0FDLEVBQUFBLGlCQUFrQkMsWUFBbEIsUUFDQVAsRUFBRSxVQUFBTyxZQUFlRixRQUNqQkwsRUFBRSxjQUFBTyxZQUFpQkEsVUFFakJMLElBQ0hDLEVBQUFILEVBQUEsa0JBQUFHLFFBWEhDLFFBWU9JLElBQUlOLEdBQ1RDLEdBQVUsS0FDVkMsRUFBQUEsYUFBQUMsU0FBQSxRQUNBSSxFQUFHTixTQUFZLFVBQ2JILEVBQUVLLFNBQWFBLFVBQ2ZJLEVBQUFBLGVBQUFKLFNBQUEsUUFDQUksRUFBQUEsaUJBQWtCRixZQUFsQixRQUNBUCxFQUFFLFVBQUFPLFlBQWVGLFFBQ2pCTCxFQUFFLGNBQUFPLFlBQWlCQSxVQVF6QixRQUFTRyxLQURYUixHQUNFUyxJQUNFVCxHQUFBLEVBQ0VTLEVBQUFBLEVBQUFBLFdBQ0FULEVBQUFBLEtBQUFBLG9CQUNTRixJQUNUWSxJQUpGVixHQUtXQSxFQUNUUyxFQUFBQSxFQUFBQSxXQUNBVCxFQUFBQSxLQUFBQSxvQkFPSixRQUFTUyxLQURYVCxHQUNFQyxFQUFTUSxFQUFBQSxrQkFBWVIsUUFDaEJELEVBQWMsRUFDZkMsSUFDK0IsSUFBNUJVLElBQ0RDLElBREZELEVBRVVBLElBRVJBLElBQ0RWLEVBQUFILEVBQUEsa0JBQUFHLFFBUEhZLEVBUTBCLEVBQ3hCWixJQUMrQixJQUE1QlksSUFDREQsSUFERkMsRUFFU0EsSUFRYixRQUFTRCxLQURURSxFQUFBQyxHQUFBZCxHQUFBSSxZQUFBLFVBQ0FTLEVBQVNGLEdBQUFBLEdBQVdJLEtBQUFDLE1BQUEsRUFBQUQsS0FBQUUsVUFBQSxJQUFBZixTQUFBLFVBQ2xCVyxJQU1GLFFBQVNLLEtBRFhMLEVBQUFDLEdBQUFkLEdBQUFJLFlBQUEsVUFDRVMsRUFBU0ssR0FBQUEsRUFBVCxHQUFxQmhCLFNBQUEsVUFDbkJXLElBTUYsUUFBU00sS0FEWCxJQUFBQyxHQUNFQSxFQUFvQixFQUNsQnJCLEdBQUdxQixFQUNEQSxFQUFBQSxFQUFBQSxrQkFBQXBCLFFBQ0FELEVBQUFBLEtBQUFBLG1EQUNBQyxLQUNlLElBQWZTLElBQ0FFLEVBQUFBLEVBRUFVLEVBQUFBLEtBQUFBLG1EQUNBckIsRUFBQUgsRUFBQSxrQkFBQUcsUUFDQVMsS0E1R0osR0FBQWEsR0FBTXpCLEVBQUEsVUFDTjBCLEVBQUExQixFQUFBLFNBQ015QixFQUFXekIsRUFBQSxVQUNYMEIsRUFBVTFCLEVBQUEsU0FDVjJCLEVBQVczQixFQUFBLFNBQ1g0QixFQUFVNUIsRUFBQSxZQUNWWSxFQUFZWixFQUFFLFlBRWRTLEVBQUFBLEVBQVdULFdBQ2pCRSxHQUFBLEVBQ0ljLEVBQUosRUFDSWQsRUFBSixFQUNJVyxFQUFBQSxFQUNBRSxFQUFBQSxFQUNBUSxFQUFBQSxJQXNHSkcsR0FBTUcsR0FBRyxRQUFTbkIsR0FHbEJpQixFQUFPRSxHQUFHLFFBQVMsV0FEckIzQixFQUMwQixJQUFqQjJCLEdBQ0YzQixFQUFjLEVBQ2ZRLEtBQ0UsSUFBQUcsR0FDQUgsRUFBQUEsS0FBQUEsZ0NBRUFFLElBQ0QsSUFBQUcsR0FOSEEsRUFPMEIsRUFDeEJMLEtBQ0UsSUFBQUssR0FDQUwsRUFBQUEsS0FBQUEsbUNBUU5rQixFQUFNQyxHQUFHLFFBQVEsV0FEakIzQixFQUN1QixJQUFqQjJCLEdBQ0QzQixFQUFjLEVBQ2ZvQixLQUNFLElBQUFDLEdBQ0FELEVBQUFBLEtBQUFBLG1DQUVBVixJQUNELElBQUFZLEdBTkhBLEVBT3lCLEVBQ3ZCRixLQUNFLElBQUFFLEdBQ0FGLEVBQUFBLEtBQUFBLHNDQU9ORyxFQUFBSSxHQUFBLFFBQUEsV0FHRTdCLEVBQUUsaUJBQWlCSyxTQUFTLFFBRDlCb0IsRUFBQUEsVUFBVWxCLFlBQVMsUUFDakJQLEVBQUUsZUFBRk8sWUFBNEIsUUFDNUJQLEVBQUUsYUFBVU8sWUFBWSxVQUsxQlAsRUFBQSxVQUFBNkIsR0FBQSxRQUFBLFdBR0U3QixFQUFFLFdBQVdPLFlBQVksaUJBRHpCUCxFQUFBLFdBQWFLLFNBQVEsVUFDckJMLEVBQXlCLEVBQ3pCQSxFQUFzQixFQUN0QmEsRUFBQUEsV0FBQUEsWUFBQUEsaUJBQ0FVLEVBQUFBLFdBQUFBLFNBQUFBLFVBQ0F2QixFQUF5QixFQUN6QkEsRUFBc0IsRUFDdEJlLEVBQUFBLGVBQUFBLFlBQUEsUUFDQVMsRUFBQUEsYUFBQUEsWUFBQSxRQUNBeEIsRUFBRSxjQUFGSyxTQUFpQkUsUUFDakJQLEVBQUUsaUJBQWFPLFNBQVksUUFDM0JQLEVBQUUsaUJBQWNLLFNBQVMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIC8vIExpc3Qgb2YgdmFyaWFibGVzIG5lZWRlZCBmb3IgdGhlIGdhbWVcbiAgY29uc3QgJHN0YXJ0ID0gJCgnLnN0YXJ0Jyk7XG4gIGNvbnN0ICRtb3ZlID0gJCgnLm1vdmUnKTtcbiAgY29uc3QgJGJvb3N0ID0gJCgnLmJvb3N0Jyk7XG4gIGNvbnN0ICRzYWx0ID0gJCgnLnNhbHQnKTtcbiAgY29uc3QgJHR1cm5UZXh0ID0gJCgnLnR1cm4nKTtcbiAgY29uc3QgJGZpbmlzaDEgPSAkKCcuZmluaXNoMScpO1xuICBjb25zdCAkZmluaXNoMiA9ICQoJy5maW5pc2gyJyk7XG4gIC8vIFZhcmlhYmxlcyB0aGF0IHVwZGF0ZSBkdXJpbmcgdGhlIGdhbWUsIGJhc2VkIG9uIHR1cm4vYWJpbHRpZXMgdXNlZC5cbiAgbGV0ICR0cmFjayA9ICQoJy50cmFjazEnKTtcbiAgbGV0IHBsYXllck9uZVR1cm4gPSB0cnVlO1xuICBsZXQgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPSAxO1xuICBsZXQgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAxO1xuICBsZXQgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9IDE7XG4gIGxldCBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID0gMTtcbiAgbGV0IGluZGV4ID0gbnVsbDtcblxuICAvLyBmdW5jdGlvbiB0aGF0IGNoZWNrcyB0byBzZWUgaWYgZWl0aGVyIHBsYXllciBpcyBpbiBhIHdpbm5pbmcgcG9zaXRpb24sIHBvc3Rpb24gaXMgZGV0ZXJtaW5lcyBpZiB0aGUgaW5kZXggb2YgdGhlIG9jY3VwaWVkIHNwYWNlIGlzIGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbiAyMSh0aGUgZmluaXNoIGxpbmUpLCB0aGVyZSBhcmUgaGlkZGVuIHJ1biBvZmYgYm94ZXMgdGhhdCBhbHNvIGV2YXVsYXRlIHRoZSB3aW5uZXIgaWYgdGhlIGZpbmFsIG1vdmUgd291bGQgb2YgdGFrZSB0aGVuIHBsYXllciBwYXNzZWQgaW5kZXggMjEuXG4gIGZ1bmN0aW9uIGNoZWNrV2lubmVyKCl7XG4gICAgaWYocGxheWVyT25lVHVybil7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIGNvbnNvbGUubG9nKGluZGV4KTtcbiAgICAgIGlmKGluZGV4ID49IDIxKXtcbiAgICAgICAgJCgnLmZlZWRiYWNrJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJGZpbmlzaDEuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgICAkZmluaXNoMS5hZGRDbGFzcygnd2lubmVyJyk7XG4gICAgICAgICQoJy5jb250cm9sbGVyJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnLnBsYXllck9uZVdpbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5yZXNldCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5yZXN1bHRCb3gnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZighcGxheWVyT25lVHVybil7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazIucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIGNvbnNvbGUubG9nKGluZGV4KTtcbiAgICAgIGlmKGluZGV4ID49IDIxKXtcbiAgICAgICAgJCgnLmZlZWRiYWNrJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJGZpbmlzaDIuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgICAgICAkZmluaXNoMi5hZGRDbGFzcygnd2lubmVyJyk7XG4gICAgICAgICQoJy5jb250cm9sbGVyJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnLnBsYXllclR3b1dpbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5yZXNldCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5yZXN1bHRCb3gnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4vLyB0aGlzIGZ1bmN0aW9uIGRldGVybWluZXMgd2hvcyB0dXJuIGl0IGlzIGFuZCB1cGRhdGVzIHRoZSBvbiBzY3JlZW4gcG9ybXB0IGFjY29yZGluZ2x5LCBpdCBpcyBmaXJlZCBkaXJlY3RseSBhZnRlciB0aGUgY2xpY2sgZXZlbnQgb24gbW92ZSwgYW5kIGl0IGZpcmVkIGlmIGEgYm9vc3QgaGFwcGVucyBhZnRlciB1cGRhdGluZyB0aGUgYm9vc3QgYm9vbGVhbiwgaXQgd29ya3Mgb24gdGhlIG9uZSB2YXJpYWJsZSB3aGljaCBnZXRzIHVwZGF0ZWQgb2YgcGxheWVyT25lVHVybiBmcm9tIHRydWUgdG8gZmFsc2UuXG4gIGZ1bmN0aW9uIGRldGVybWluZVR1cm4oKXtcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGxvY2F0ZUdhcnkoKTtcbiAgICAgIHBsYXllck9uZVR1cm4gPSBmYWxzZTtcbiAgICAgICR0cmFjayA9ICQoJy50cmFjazInKTtcbiAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMlxcJ3MgVHVybicpO1xuICAgIH0gZWxzZSBpZighcGxheWVyT25lVHVybil7XG4gICAgICBsb2NhdGVHYXJ5KCk7XG4gICAgICBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgICAgICR0cmFjayA9ICQoJy50cmFjazEnKTtcbiAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMVxcJ3MgVHVybicpO1xuICAgIH1cbiAgfVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGxvY2F0ZXMgZ2FyeSBvbiB0aGUgYm9hcmQsIHRoZSBzZXBlcmF0ZSBwYXJ0cyBvZiB0aGUgaWYgZWxzZSBzdGF0ZW1lbnQgcnVuIGJhc2VkIG9uIHdoaWNoIHBsYXllcnMgdHVybiBpdCBpcywgb25jZSBkb2luZyBzbyBpdCBmaXJlcyBvZmYgdGhlIG1vdmVHYXJ5IGZ1bmN0aW9uLiBPciBpZiBpdCBkZXRlY3RzIHRoZSBib29zdCBoYXMgYmVlbiB1c2VkKGJ5IGl0IHVwZGF0aW5nIGZyb20gMSB0byAwIG9uIHRoZSBib29zdCBidXR0b24gY2xpY2spIGlmIGZpcmVzIG9mZiB0aGUgYm9vc3RHYXJ5IGZ1bmN0aW9uIGluc3RlYWQsIGl0IHRoZW4gdXBkYXRlcyB0aGUgYm9vc3QgY291bnQgdG8gMiB3aGljaCBpbmZvcm1zIHRoZSB1c2VyIHRoZSBib29zdCBoYXMgYmVlbiB1c2VkIHdoZW4gY2xpY2tlZC5cbiAgZnVuY3Rpb24gbG9jYXRlR2FyeSgpe1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBpZihQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA+IDApe1xuICAgICAgICBtb3ZlR2FyeSgpO1xuICAgICAgfSBlbHNlIGlmKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGJvb3N0R2FyeSgpO1xuICAgICAgICBQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9IDI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghcGxheWVyT25lVHVybil7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazIucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIGlmKFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID4gMCl7XG4gICAgICAgIG1vdmVHYXJ5KCk7XG4gICAgICB9ZWxzZSBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBib29zdEdhcnkoKTtcbiAgICAgICAgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgZnVuY3Rpb24gbW92ZXMgZ2FyeSwgaXQgZmlyc3QgZGV0ZXJtaW5lcyBpZiBpdCBpcyBhIHJlZ3VsYXIgbW92ZSBvciBhIGJvb3N0IG1vdmUsIGlmIGl0IGlzIGEgcmVndWxhciBtb3ZlIGl0IG1vdmVzIHRoZSBjdXJyZW50IHBsYXllcnMgR2FyeSBiZXR3ZWVuIDEgYW5kIDMgaW5kZXggc3BhY2VzIGFsb25nLCBmaW5hbGx5LCBpdCBydW5zIHRoZSBjaGVja1dpbm5lciBmdW5jdGlvbiB0byBzZWUgaWYgYSB3aW4gY29uZGl0aW9uIGhhcyBiZWVuIG1ldC5cbiAgZnVuY3Rpb24gbW92ZUdhcnkoKSB7XG4gICAgJHRyYWNrLmVxKGluZGV4KS5yZW1vdmVDbGFzcygncGxheWVyJyk7XG4gICAgJHRyYWNrLmVxKGluZGV4ICsgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMSApICkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIGNoZWNrV2lubmVyKCk7XG4gIH1cblxuLy8gVGhpcyBmdW5jdGlvbiBmaXJlcyBvZmYgaWYgdGhlIGJvb3N0IGJ1dHRvbiBpcyBjbGlja2VkIG9uLCB0aGUgY2xpY2sgZXZlbnQgdXBkYXRlcyB0aGUgYm9vc3QgY291bnQgYW5kIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIGxvY2F0ZUdhcnkgaXMgcnVubmluZy4gSXQgZ3VhcmVudGVlcyB0aGUgdXNlciBhIG1vdmUgb2YgNSBzcGFjZXMgdGhlbiBydW5zIHRoZSBjaGVjayB3aW5uZXIgZnVuY3Rpb24gdG8gc2VlIGlmIGEgd2luIGNvbmRpdGlvbiBoYXMgYmVlbiBtZXQuXG4gIGZ1bmN0aW9uIGJvb3N0R2FyeSgpIHtcbiAgICAkdHJhY2suZXEoaW5kZXgpLnJlbW92ZUNsYXNzKCdwbGF5ZXInKTtcbiAgICAkdHJhY2suZXEoaW5kZXggKyA1KS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgY2hlY2tXaW5uZXIoKTtcbiAgfVxuXG4vLyB0aGUgc2FsdEdhcnkgZnVuY3Rpb24uXG4gIGZ1bmN0aW9uIHNhbHRHYXJ5KCkge1xuICAgIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDApe1xuICAgICAgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9IDI7XG4gICAgICBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAyIGhhcyBiZWVuIHNhbHRlZCEgUGxheWVyIDEgbW92ZXMgYWdhaW4hJyk7XG4gICAgICBtb3ZlR2FyeSgpO1xuICAgIH0gZWxzZSBpZihQbGF5ZXJUd29TYWx0UmVtYWluaW5nID09PSAwKXtcbiAgICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAyO1xuICAgICAgLy8gcGxheWVyT25lVHVybiA9IGZhbHNlO1xuICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGhhcyBiZWVuIHNhbHRlZCEgUGxheWVyIDIgbW92ZXMgYWdhaW4hJyk7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazIucGxheWVyJykuaW5kZXgoKTtcbiAgICAgIG1vdmVHYXJ5KCk7XG4gICAgfVxuICB9XG4vLyB2YXJpb3VzIGV2ZW50IGxpc3RlbmVycyBiZWxvdy5cblxuLy8gVGhpcyBpcyB0aGUgY2xpY2sgZXZlbnQgZm9yIHRoZSBtb3ZlIGJ1dHRvbiwgd2hlbiBjbGlja2VkIGl0IGZpcmVzIG9mZiB0aGUgZGV0ZXJtaW5lVHVybiBmdW5jdGlvbiB3aGljaCBzZXRzIGluIG1vdGlvbiB0aGUgbG9jYXRlR2FyeSBhbmQgbW92ZUdhcnkgZnVuY3Rpb25zLlxuICAkbW92ZS5vbignY2xpY2snLCBkZXRlcm1pbmVUdXJuKTtcblxuLy8gdGhpcyBpcyB0aGUgY2xpY2sgZXZlbnQgZm9yIHRoZSBib29zdCBidXR0b24sIHdoZW4gY2xpY2tlZCBpdCBjaGVja3MgZmlyc3QgdG8gc2VlIGlmIHRoZSBwbGF5ZXIgaGFzIGFscmVhZHkgdXNlZCB0aGVpciBib29zdCwgaWYgbm90IGl0IHVwZGF0ZXMgdGhhdCBpbmZvcm1hdGlvbiBhbmQgcnVucyB0aGUgZGV0ZXJtaW5lVHVybiBmdW5jdGlvbiBsaWtlIGEgbm9ybWFsIG1vdmUsIHdoZW4gdGhpcyByZWFjaGVzIHRoZSBsb2NhdGVHYXJ5IGZ1bmN0aW9uLCBpdCB0YWtlcyBub3RlIHRoYXQgdGhlIGJvb3N0IGhhcyBiZWVuIHVzZWQgdG8gZmlyZSBvZmYgdGhlIGJvb3N0R2FyeSBmdW5jdGlvbiBpbnN0ZWFkIG9mIHRoZSBtb3ZlR2FyeSBmdW5jdGlvbi4gSXQgdGhlbiB1cGRhdGVzIHRoZSBib29zdCByZW1haW5pbmcgYWdhaW4sIHNvIHRoYXQgaWYgYW5vdGhlciBib29zdCBpcyBhdHRlbXB0ZWQsIGl0IGluZm9ybXMgdGhlIHVzZXIgdGhhdCB0aGVpciBib29zdCBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuXG4gICRib29zdC5vbignY2xpY2snLCAoKSA9PntcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGlmKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPSAwO1xuICAgICAgICBkZXRlcm1pbmVUdXJuKCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDEgYm9vc3QgYWxyZWFkeSB1c2VkIScpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXBsYXllck9uZVR1cm4pe1xuICAgICAgaWYoUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICBQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9IDA7XG4gICAgICAgIGRldGVybWluZVR1cm4oKTtcbiAgICAgIH0gZWxzZSBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMiBib29zdCBhbHJlYWR5IHVzZWQhJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBiZWxvdyBpcyB0aGUgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBzYWx0IGFiaWxpdHkuIFVzaW5nIHRoaXMgd2lsbCBzdG9wIHlvdXIgb3Bwb25lbnRzIG5leHQgdHVybiBhbmQgZ2l2ZSBnYXJ5IGEgbm9ybWFsIGdhcnlNb3ZlIHdoaWxlIHVzaW5nIGl0LiBJZiBhIHBsYXllciBoYXMgYWxyZWFkeSB1c2VkIHRoZWlyIHNhbHQgaXQgaW5mb3JtcyB0aGVtIG9uIHRoZSAkdHVyblRleHQgZmVlZGJhY2suXG4gICRzYWx0Lm9uKCdjbGljaycsKCkgPT4ge1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgaWYoUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgIFBsYXllck9uZVNhbHRSZW1haW5pbmcgPSAwO1xuICAgICAgICBzYWx0R2FyeSgpO1xuICAgICAgfSBlbHNlIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDIpe1xuICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDEgaGFzIGFscmVhZHkgdXNlZCBTYWx0IScpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZighcGxheWVyT25lVHVybil7XG4gICAgICBpZihQbGF5ZXJUd29TYWx0UmVtYWluaW5nID09PSAxKXtcbiAgICAgICAgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9IDA7XG4gICAgICAgIHNhbHRHYXJ5KCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMiBoYXMgYWxyZWFkeSB1c2VkIFNhbHQhJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBDbGljayBldmVudCB0byBzdGFydCB0aGUgZ2FtZSwgcmVtb3ZlcyB0aGUgaW5zdHJ1Y3Rpb24gcGFnZSBhbmQgdGhlbiBzaG93cyB0aGUgcmFjZXRyYWNrLCBmZWVkYmFjayBib3ggYW5kIGNvbnRyb2xsZXIuXG5cbiAgJHN0YXJ0Lm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkKCcuaW5zdHJ1Y3Rpb25zJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuYm9hcmQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICQoJy5jb250cm9sbGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuZmVlZGJhY2snKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICB9KTtcblxuICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlIHJlc2V0IGJ1dHRvbiwgaXQgYmFzaWNhbGx5IGhpZGVzIGFsbCBvZiB0aGUgZmVlZGJhY2sgZnJvbSB0aGUgcmVtYWluaW5nIGdhbWUgYW5kIG1vdmVzIGJvdGggcGxheWVyIGljb25zIGJhY2sgdG8gdGhlIHN0YXJ0IGxpbmUsIGl0IGFsc28gcmVzZXRzIHRoZSBzYWx0IGFuZCBib29zdCBjb3VudGVycyB0byAxIHNvIHRoYXQgdGhleSBjYW4gbm93IGJlIHVzZWQgYWdhaW4uXG5cbiAgJCgnLnJlc2V0Jykub24oJ2NsaWNrJywoKSA9PiB7XG4gICAgJCgnLnRyYWNrMScpLnJlbW92ZUNsYXNzKCdwbGF5ZXIgd2lubmVyJyk7XG4gICAgJCgnLnN0YXJ0MScpLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICBQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9IDE7XG4gICAgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9MTtcbiAgICAkKCcudHJhY2syJykucmVtb3ZlQ2xhc3MoJ3BsYXllciB3aW5uZXInKTtcbiAgICAkKCcuc3RhcnQyJykuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMTtcbiAgICBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID0gMTtcbiAgICAkKCcuY29udHJvbGxlcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJCgnLmZlZWRiYWNrJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcucmVzdWx0Qm94JykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcucGxheWVyT25lV2luJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcucGxheWVyVHdvV2luJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgfSk7XG59KTtcbiJdfQ==
