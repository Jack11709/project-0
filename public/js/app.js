"use strict";$(function(){function e(){x?(g=$(".track1.player").index(),console.log(g),g>=21&&(k.play(),$(".feedback").addClass("hide"),y.addClass("player"),y.addClass("winner"),$(".controller").addClass("hide"),$(".playerOneWin").removeClass("hide"),$(".reset").removeClass("hide"),$(".resultBox").removeClass("hide"))):x||(g=$(".track2.player").index(),console.log(g),g>=21&&(k.play(),$(".feedback").addClass("hide"),u.addClass("player"),u.addClass("winner"),$(".controller").addClass("hide"),$(".playerTwoWin").removeClass("hide"),$(".reset").removeClass("hide"),$(".resultBox").removeClass("hide")))}function a(){x?(s(),x=!1,f=$(".track2"),c.text("Player 2's Turn")):x||(s(),x=!0,f=$(".track1"),c.text("Player 1's Turn"))}function s(){x?(g=$(".track1.player").index(),b>0?l():0===b&&(r(),b=2)):x||(g=$(".track2.player").index(),P>0?l():0===P&&(r(),P=2))}function l(){f.eq(g).removeClass("player"),f.eq(g+(Math.floor(3*Math.random())+1)).addClass("player"),e()}function r(){f.eq(g).removeClass("player"),f.eq(g+5).addClass("player"),e()}function o(){0===w?(w=2,x=!0,g=$(".track1.player").index(),c.text("Player 2 has been salted! Player 1 moves again!"),l()):0===S&&(S=2,c.text("Player 1 has been salted! Player 2 moves again!"),g=$(".track2.player").index(),l())}var d=$(".start"),n=$(".move"),t=$(".boost"),i=$(".salt"),c=$(".turn"),y=$(".finish1"),u=$(".finish2"),p=$(".theme")[0];p.src="sounds/closing_theme.mp3";var C=$(".boostSound")[0];C.src="sounds/boost_sound.mp3";var h=$(".saltSound")[0];h.src="sounds/salt_sound.mp3";var m=$(".moveSound")[0];m.src="sounds/move_sound.mp3";var v=$(".errorSound")[0];v.src="sounds/error_sound.mp3";var k=$(".winSound")[0];k.src="sounds/winning_sound.mp3";var f=$(".track1"),x=!0,b=1,P=1,w=1,S=1,g=null;n.on("click",function(){m.play(),a()}),t.on("click",function(){x?1===b?(C.play(),b=0,a()):2===b&&(v.play(),c.text("Player 1 boost already used!")):x||(1===P?(C.play(),P=0,a()):2===P&&(v.play(),c.text("Player 2 boost already used!")))}),i.on("click",function(){x?1===w?(h.play(),w=0,o()):2===w&&(v.play(),c.text("Player 1 has already used Salt!")):x||(1===S?(h.play(),S=0,o()):2===S&&(v.play(),c.text("Player 2 has already used Salt!")))}),d.on("click",function(){$(".instructions").addClass("hide"),$(".board").removeClass("hide"),$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),p.play()}),$(".reset").on("click",function(){$(".track1").removeClass("player winner"),$(".start1").addClass("player"),b=1,w=1,$(".track2").removeClass("player winner"),$(".start2").addClass("player"),P=1,S=1,$(".controller").removeClass("hide"),$(".feedback").removeClass("hide"),$(".resultBox").addClass("hide"),$(".playerOneWin").addClass("hide"),$(".playerTwoWin").addClass("hide")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY2hlY2tXaW5uZXIiLCJwbGF5ZXJPbmVUdXJuIiwiaW5kZXgiLCJjb25zb2xlIiwiYWRkQ2xhc3MiLCIkd2luU291bmQiLCIkZmluaXNoMSIsInJlbW92ZUNsYXNzIiwibG9nIiwiJGZpbmlzaDIiLCJkZXRlcm1pbmVUdXJuIiwibG9jYXRlR2FyeSIsIiR0dXJuVGV4dCIsIlBsYXllck9uZUJvb3N0UmVtYWluaW5nIiwibW92ZUdhcnkiLCJQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyIsIiR0cmFjayIsImVxIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYm9vc3RHYXJ5Iiwic2FsdEdhcnkiLCJQbGF5ZXJPbmVTYWx0UmVtYWluaW5nIiwiUGxheWVyVHdvU2FsdFJlbWFpbmluZyIsIiRzdGFydCIsIiRtb3ZlIiwiJGJvb3N0IiwiJHNhbHQiLCIkYXVkaW9UaGVtZSIsInNyYyIsIiRib29zdFNvdW5kIiwiJHNhbHRTb3VuZCIsIiRtb3ZlU291bmQiLCIkZXJyb3JTb3VuZCIsIm9uIiwicGxheSJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FnQ0EsUUFBU0MsS0FEVEMsR0FDQUMsRUFBU0YsRUFBQUEsa0JBQWFFLFFBQ3BCQyxRQUFHRixJQUFBQSxHQUNEQyxHQUFVLEtBQ1ZDLEVBQVlELE9BQ1pILEVBQUdHLGFBQVlFLFNBQUEsUUFDYkMsRUFBQUEsU0FBQSxVQUNBTixFQUFFSyxTQUFhQSxVQUNmRSxFQUFBQSxlQUFBRixTQUFBLFFBQ0FFLEVBQUFBLGlCQUFrQkMsWUFBbEIsUUFDQVIsRUFBRSxVQUFBUSxZQUFlSCxRQUNqQkwsRUFBRSxjQUFBUSxZQUFpQkEsVUFFakJOLElBQ0hDLEVBQUFILEVBQUEsa0JBQUFHLFFBWkhDLFFBYU9LLElBQUlQLEdBQ1RDLEdBQVUsS0FDVkMsRUFBWUQsT0FDWkgsRUFBR0csYUFBWUUsU0FBQSxRQUNiQyxFQUFBQSxTQUFBLFVBQ0FOLEVBQUVLLFNBQWFBLFVBQ2ZLLEVBQUFB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bEIsWUFBUyxRQUNqQlIsRUFBRSxlQUFGUSxZQUE0QixRQUM1QlIsRUFBRSxhQUFVUSxZQUFZLFFBQ3hCUixFQUFFcUMsU0FLSnJDLEVBQUEsVUFBQW9DLEdBQUEsUUFBQSxXQUdFcEMsRUFBRSxXQUFXUSxZQUFZLGlCQUR6QlIsRUFBQSxXQUFhSyxTQUFRLFVBQ3JCTCxFQUF5QixFQUN6QkEsRUFBc0IsRUFDdEJjLEVBQUFBLFdBQUFBLFlBQUFBLGlCQUNBVSxFQUFBQSxXQUFBQSxTQUFBQSxVQUNBeEIsRUFBeUIsRUFDekJBLEVBQXNCLEVBQ3RCZ0IsRUFBQUEsZUFBQUEsWUFBQSxRQUNBUyxFQUFBQSxhQUFBQSxZQUFBLFFBQ0F6QixFQUFFLGNBQUZLLFNBQWlCRyxRQUNqQlIsRUFBRSxpQkFBYVEsU0FBWSxRQUMzQlIsRUFBRSxpQkFBY0ssU0FBUyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgLy8gTGlzdCBvZiB2YXJpYWJsZXMgbmVlZGVkIGZvciB0aGUgZ2FtZVxuICBjb25zdCAkc3RhcnQgPSAkKCcuc3RhcnQnKTtcbiAgY29uc3QgJG1vdmUgPSAkKCcubW92ZScpO1xuICBjb25zdCAkYm9vc3QgPSAkKCcuYm9vc3QnKTtcbiAgY29uc3QgJHNhbHQgPSAkKCcuc2FsdCcpO1xuICBjb25zdCAkdHVyblRleHQgPSAkKCcudHVybicpO1xuICBjb25zdCAkZmluaXNoMSA9ICQoJy5maW5pc2gxJyk7XG4gIGNvbnN0ICRmaW5pc2gyID0gJCgnLmZpbmlzaDInKTtcbiAgLy8gQXVkaW8gdmFyaWFibGVzLlxuICBjb25zdCAkYXVkaW9UaGVtZSA9ICQoJy50aGVtZScpWzBdO1xuICAkYXVkaW9UaGVtZS5zcmMgPSAnc291bmRzL2Nsb3NpbmdfdGhlbWUubXAzJztcbiAgY29uc3QgJGJvb3N0U291bmQgPSAkKCcuYm9vc3RTb3VuZCcpWzBdO1xuICAkYm9vc3RTb3VuZC5zcmMgPSAnc291bmRzL2Jvb3N0X3NvdW5kLm1wMyc7XG4gIGNvbnN0ICRzYWx0U291bmQgPSAkKCcuc2FsdFNvdW5kJylbMF07XG4gICRzYWx0U291bmQuc3JjID0gJ3NvdW5kcy9zYWx0X3NvdW5kLm1wMyc7XG4gIGNvbnN0ICRtb3ZlU291bmQgPSAkKCcubW92ZVNvdW5kJylbMF07XG4gICRtb3ZlU291bmQuc3JjID0gJ3NvdW5kcy9tb3ZlX3NvdW5kLm1wMyc7XG4gIGNvbnN0ICRlcnJvclNvdW5kID0gJCgnLmVycm9yU291bmQnKVswXTtcbiAgJGVycm9yU291bmQuc3JjID0gJ3NvdW5kcy9lcnJvcl9zb3VuZC5tcDMnO1xuICBjb25zdCAkd2luU291bmQgPSAkKCcud2luU291bmQnKVswXTtcbiAgJHdpblNvdW5kLnNyYyA9ICdzb3VuZHMvd2lubmluZ19zb3VuZC5tcDMnO1xuICAvLyBWYXJpYWJsZXMgdGhhdCB1cGRhdGUgZHVyaW5nIHRoZSBnYW1lLCBiYXNlZCBvbiB0dXJuL2FiaWx0aWVzIHVzZWQuXG4gIGxldCAkdHJhY2sgPSAkKCcudHJhY2sxJyk7XG4gIGxldCBwbGF5ZXJPbmVUdXJuID0gdHJ1ZTtcbiAgbGV0IFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMTtcbiAgbGV0IFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMTtcbiAgbGV0IFBsYXllck9uZVNhbHRSZW1haW5pbmcgPSAxO1xuICBsZXQgUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9IDE7XG4gIGxldCBpbmRleCA9IG51bGw7XG5cbiAgLy8gZnVuY3Rpb24gdGhhdCBjaGVja3MgdG8gc2VlIGlmIGVpdGhlciBwbGF5ZXIgaXMgaW4gYSB3aW5uaW5nIHBvc2l0aW9uLCBwb3N0aW9uIGlzIGRldGVybWluZXMgaWYgdGhlIGluZGV4IG9mIHRoZSBvY2N1cGllZCBzcGFjZSBpcyBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gMjEodGhlIGZpbmlzaCBsaW5lKSwgdGhlcmUgYXJlIGhpZGRlbiBydW4gb2ZmIGJveGVzIHRoYXQgYWxzbyBldmF1bGF0ZSB0aGUgd2lubmVyIGlmIHRoZSBmaW5hbCBtb3ZlIHdvdWxkIG9mIHRha2UgdGhlbiBwbGF5ZXIgcGFzc2VkIGluZGV4IDIxLlxuICBmdW5jdGlvbiBjaGVja1dpbm5lcigpe1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgaW5kZXggPSAkKCcudHJhY2sxLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG4gICAgICBpZihpbmRleCA+PSAyMSl7XG4gICAgICAgICR3aW5Tb3VuZC5wbGF5KCk7XG4gICAgICAgICQoJy5mZWVkYmFjaycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICRmaW5pc2gxLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICAgICAgJGZpbmlzaDEuYWRkQ2xhc3MoJ3dpbm5lcicpO1xuICAgICAgICAkKCcuY29udHJvbGxlcicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5wbGF5ZXJPbmVXaW4nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucmVzZXQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucmVzdWx0Qm94JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoIXBsYXllck9uZVR1cm4pe1xuICAgICAgaW5kZXggPSAkKCcudHJhY2syLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG4gICAgICBpZihpbmRleCA+PSAyMSl7XG4gICAgICAgICR3aW5Tb3VuZC5wbGF5KCk7XG4gICAgICAgICQoJy5mZWVkYmFjaycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICRmaW5pc2gyLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICAgICAgJGZpbmlzaDIuYWRkQ2xhc3MoJ3dpbm5lcicpO1xuICAgICAgICAkKCcuY29udHJvbGxlcicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5wbGF5ZXJUd29XaW4nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucmVzZXQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcucmVzdWx0Qm94JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuLy8gdGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIHdob3MgdHVybiBpdCBpcyBhbmQgdXBkYXRlcyB0aGUgb24gc2NyZWVuIHBvcm1wdCBhY2NvcmRpbmdseSwgaXQgaXMgZmlyZWQgZGlyZWN0bHkgYWZ0ZXIgdGhlIGNsaWNrIGV2ZW50IG9uIG1vdmUsIGFuZCBpdCBmaXJlZCBpZiBhIGJvb3N0IGhhcHBlbnMgYWZ0ZXIgdXBkYXRpbmcgdGhlIGJvb3N0IGJvb2xlYW4sIGl0IHdvcmtzIG9uIHRoZSBvbmUgdmFyaWFibGUgd2hpY2ggZ2V0cyB1cGRhdGVkIG9mIHBsYXllck9uZVR1cm4gZnJvbSB0cnVlIHRvIGZhbHNlLlxuICBmdW5jdGlvbiBkZXRlcm1pbmVUdXJuKCl7XG4gICAgaWYocGxheWVyT25lVHVybil7XG4gICAgICBsb2NhdGVHYXJ5KCk7XG4gICAgICBwbGF5ZXJPbmVUdXJuID0gZmFsc2U7XG4gICAgICAkdHJhY2sgPSAkKCcudHJhY2syJyk7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDJcXCdzIFR1cm4nKTtcbiAgICB9IGVsc2UgaWYoIXBsYXllck9uZVR1cm4pe1xuICAgICAgbG9jYXRlR2FyeSgpO1xuICAgICAgcGxheWVyT25lVHVybiA9IHRydWU7XG4gICAgICAkdHJhY2sgPSAkKCcudHJhY2sxJyk7XG4gICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDFcXCdzIFR1cm4nKTtcbiAgICB9XG4gIH1cblxuLy8gVGhpcyBmdW5jdGlvbiBsb2NhdGVzIGdhcnkgb24gdGhlIGJvYXJkLCB0aGUgc2VwZXJhdGUgcGFydHMgb2YgdGhlIGlmIGVsc2Ugc3RhdGVtZW50IHJ1biBiYXNlZCBvbiB3aGljaCBwbGF5ZXJzIHR1cm4gaXQgaXMsIG9uY2UgZG9pbmcgc28gaXQgZmlyZXMgb2ZmIHRoZSBtb3ZlR2FyeSBmdW5jdGlvbi4gT3IgaWYgaXQgZGV0ZWN0cyB0aGUgYm9vc3QgaGFzIGJlZW4gdXNlZChieSBpdCB1cGRhdGluZyBmcm9tIDEgdG8gMCBvbiB0aGUgYm9vc3QgYnV0dG9uIGNsaWNrKSBpZiBmaXJlcyBvZmYgdGhlIGJvb3N0R2FyeSBmdW5jdGlvbiBpbnN0ZWFkLCBpdCB0aGVuIHVwZGF0ZXMgdGhlIGJvb3N0IGNvdW50IHRvIDIgd2hpY2ggaW5mb3JtcyB0aGUgdXNlciB0aGUgYm9vc3QgaGFzIGJlZW4gdXNlZCB3aGVuIGNsaWNrZWQuXG4gIGZ1bmN0aW9uIGxvY2F0ZUdhcnkoKXtcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGluZGV4ID0gJCgnLnRyYWNrMS5wbGF5ZXInKS5pbmRleCgpO1xuICAgICAgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPiAwKXtcbiAgICAgICAgbW92ZUdhcnkoKTtcbiAgICAgIH0gZWxzZSBpZihQbGF5ZXJPbmVCb29zdFJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBib29zdEdhcnkoKTtcbiAgICAgICAgUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPSAyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXBsYXllck9uZVR1cm4pe1xuICAgICAgaW5kZXggPSAkKCcudHJhY2syLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBpZihQbGF5ZXJUd29Cb29zdFJlbWFpbmluZyA+IDApe1xuICAgICAgICBtb3ZlR2FyeSgpO1xuICAgICAgfWVsc2UgaWYoUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgYm9vc3RHYXJ5KCk7XG4gICAgICAgIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGZ1bmN0aW9uIG1vdmVzIGdhcnksIGl0IGZpcnN0IGRldGVybWluZXMgaWYgaXQgaXMgYSByZWd1bGFyIG1vdmUgb3IgYSBib29zdCBtb3ZlLCBpZiBpdCBpcyBhIHJlZ3VsYXIgbW92ZSBpdCBtb3ZlcyB0aGUgY3VycmVudCBwbGF5ZXJzIEdhcnkgYmV0d2VlbiAxIGFuZCAzIGluZGV4IHNwYWNlcyBhbG9uZywgZmluYWxseSwgaXQgcnVucyB0aGUgY2hlY2tXaW5uZXIgZnVuY3Rpb24gdG8gc2VlIGlmIGEgd2luIGNvbmRpdGlvbiBoYXMgYmVlbiBtZXQuXG4gIGZ1bmN0aW9uIG1vdmVHYXJ5KCkge1xuICAgICR0cmFjay5lcShpbmRleCkucmVtb3ZlQ2xhc3MoJ3BsYXllcicpO1xuICAgICR0cmFjay5lcShpbmRleCArIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSArIDEgKSApLmFkZENsYXNzKCdwbGF5ZXInKTtcbiAgICBjaGVja1dpbm5lcigpO1xuICB9XG5cbi8vIFRoaXMgZnVuY3Rpb24gZmlyZXMgb2ZmIGlmIHRoZSBib29zdCBidXR0b24gaXMgY2xpY2tlZCBvbiwgdGhlIGNsaWNrIGV2ZW50IHVwZGF0ZXMgdGhlIGJvb3N0IGNvdW50IGFuZCB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIHRoZSBsb2NhdGVHYXJ5IGlzIHJ1bm5pbmcuIEl0IGd1YXJlbnRlZXMgdGhlIHVzZXIgYSBtb3ZlIG9mIDUgc3BhY2VzIHRoZW4gcnVucyB0aGUgY2hlY2sgd2lubmVyIGZ1bmN0aW9uIHRvIHNlZSBpZiBhIHdpbiBjb25kaXRpb24gaGFzIGJlZW4gbWV0LlxuICBmdW5jdGlvbiBib29zdEdhcnkoKSB7XG4gICAgJHRyYWNrLmVxKGluZGV4KS5yZW1vdmVDbGFzcygncGxheWVyJyk7XG4gICAgJHRyYWNrLmVxKGluZGV4ICsgNSkuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIGNoZWNrV2lubmVyKCk7XG4gIH1cblxuLy8gdGhlIHNhbHRHYXJ5IGZ1bmN0aW9uLlxuICBmdW5jdGlvbiBzYWx0R2FyeSgpIHtcbiAgICBpZihQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID09PSAwKXtcbiAgICAgIFBsYXllck9uZVNhbHRSZW1haW5pbmcgPSAyO1xuICAgICAgcGxheWVyT25lVHVybiA9IHRydWU7XG4gICAgICBpbmRleCA9ICQoJy50cmFjazEucGxheWVyJykuaW5kZXgoKTtcbiAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMiBoYXMgYmVlbiBzYWx0ZWQhIFBsYXllciAxIG1vdmVzIGFnYWluIScpO1xuICAgICAgbW92ZUdhcnkoKTtcbiAgICB9IGVsc2UgaWYoUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9PT0gMCl7XG4gICAgICBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID0gMjtcbiAgICAgIC8vIHBsYXllck9uZVR1cm4gPSBmYWxzZTtcbiAgICAgICR0dXJuVGV4dC50ZXh0KCdQbGF5ZXIgMSBoYXMgYmVlbiBzYWx0ZWQhIFBsYXllciAyIG1vdmVzIGFnYWluIScpO1xuICAgICAgaW5kZXggPSAkKCcudHJhY2syLnBsYXllcicpLmluZGV4KCk7XG4gICAgICBtb3ZlR2FyeSgpO1xuICAgIH1cbiAgfVxuLy8gdmFyaW91cyBldmVudCBsaXN0ZW5lcnMgYmVsb3cuXG5cbi8vIFRoaXMgaXMgdGhlIGNsaWNrIGV2ZW50IGZvciB0aGUgbW92ZSBidXR0b24sIHdoZW4gY2xpY2tlZCBpdCBmaXJlcyBvZmYgdGhlIGRldGVybWluZVR1cm4gZnVuY3Rpb24gd2hpY2ggc2V0cyBpbiBtb3Rpb24gdGhlIGxvY2F0ZUdhcnkgYW5kIG1vdmVHYXJ5IGZ1bmN0aW9ucy5cbiAgJG1vdmUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICRtb3ZlU291bmQucGxheSgpO1xuICAgIGRldGVybWluZVR1cm4oKTtcbiAgfSk7XG5cbi8vIHRoaXMgaXMgdGhlIGNsaWNrIGV2ZW50IGZvciB0aGUgYm9vc3QgYnV0dG9uLCB3aGVuIGNsaWNrZWQgaXQgY2hlY2tzIGZpcnN0IHRvIHNlZSBpZiB0aGUgcGxheWVyIGhhcyBhbHJlYWR5IHVzZWQgdGhlaXIgYm9vc3QsIGlmIG5vdCBpdCB1cGRhdGVzIHRoYXQgaW5mb3JtYXRpb24gYW5kIHJ1bnMgdGhlIGRldGVybWluZVR1cm4gZnVuY3Rpb24gbGlrZSBhIG5vcm1hbCBtb3ZlLCB3aGVuIHRoaXMgcmVhY2hlcyB0aGUgbG9jYXRlR2FyeSBmdW5jdGlvbiwgaXQgdGFrZXMgbm90ZSB0aGF0IHRoZSBib29zdCBoYXMgYmVlbiB1c2VkIHRvIGZpcmUgb2ZmIHRoZSBib29zdEdhcnkgZnVuY3Rpb24gaW5zdGVhZCBvZiB0aGUgbW92ZUdhcnkgZnVuY3Rpb24uIEl0IHRoZW4gdXBkYXRlcyB0aGUgYm9vc3QgcmVtYWluaW5nIGFnYWluLCBzbyB0aGF0IGlmIGFub3RoZXIgYm9vc3QgaXMgYXR0ZW1wdGVkLCBpdCBpbmZvcm1zIHRoZSB1c2VyIHRoYXQgdGhlaXIgYm9vc3QgaGFzIGFscmVhZHkgYmVlbiB1c2VkLlxuICAkYm9vc3Qub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIGlmKHBsYXllck9uZVR1cm4pe1xuICAgICAgaWYoUGxheWVyT25lQm9vc3RSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAkYm9vc3RTb3VuZC5wbGF5KCk7XG4gICAgICAgIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMDtcbiAgICAgICAgZGV0ZXJtaW5lVHVybigpO1xuICAgICAgfSBlbHNlIGlmKFBsYXllck9uZUJvb3N0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDEgYm9vc3QgYWxyZWFkeSB1c2VkIScpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXBsYXllck9uZVR1cm4pe1xuICAgICAgaWYoUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAkYm9vc3RTb3VuZC5wbGF5KCk7XG4gICAgICAgIFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID0gMDtcbiAgICAgICAgZGV0ZXJtaW5lVHVybigpO1xuICAgICAgfSBlbHNlIGlmKFBsYXllclR3b0Jvb3N0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDIgYm9vc3QgYWxyZWFkeSB1c2VkIScpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gYmVsb3cgaXMgdGhlIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgc2FsdCBhYmlsaXR5LiBVc2luZyB0aGlzIHdpbGwgc3RvcCB5b3VyIG9wcG9uZW50cyBuZXh0IHR1cm4gYW5kIGdpdmUgZ2FyeSBhIG5vcm1hbCBnYXJ5TW92ZSB3aGlsZSB1c2luZyBpdC4gSWYgYSBwbGF5ZXIgaGFzIGFscmVhZHkgdXNlZCB0aGVpciBzYWx0IGl0IGluZm9ybXMgdGhlbSBvbiB0aGUgJHR1cm5UZXh0IGZlZWRiYWNrLlxuICAkc2FsdC5vbignY2xpY2snLCgpID0+IHtcbiAgICBpZihwbGF5ZXJPbmVUdXJuKXtcbiAgICAgIGlmKFBsYXllck9uZVNhbHRSZW1haW5pbmcgPT09IDEpe1xuICAgICAgICAkc2FsdFNvdW5kLnBsYXkoKTtcbiAgICAgICAgUGxheWVyT25lU2FsdFJlbWFpbmluZyA9IDA7XG4gICAgICAgIHNhbHRHYXJ5KCk7XG4gICAgICB9IGVsc2UgaWYoUGxheWVyT25lU2FsdFJlbWFpbmluZyA9PT0gMil7XG4gICAgICAgICRlcnJvclNvdW5kLnBsYXkoKTtcbiAgICAgICAgJHR1cm5UZXh0LnRleHQoJ1BsYXllciAxIGhhcyBhbHJlYWR5IHVzZWQgU2FsdCEnKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoIXBsYXllck9uZVR1cm4pe1xuICAgICAgaWYoUGxheWVyVHdvU2FsdFJlbWFpbmluZyA9PT0gMSl7XG4gICAgICAgICRzYWx0U291bmQucGxheSgpO1xuICAgICAgICBQbGF5ZXJUd29TYWx0UmVtYWluaW5nID0gMDtcbiAgICAgICAgc2FsdEdhcnkoKTtcbiAgICAgIH0gZWxzZSBpZihQbGF5ZXJUd29TYWx0UmVtYWluaW5nID09PSAyKXtcbiAgICAgICAgJGVycm9yU291bmQucGxheSgpO1xuICAgICAgICAkdHVyblRleHQudGV4dCgnUGxheWVyIDIgaGFzIGFscmVhZHkgdXNlZCBTYWx0IScpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gQ2xpY2sgZXZlbnQgdG8gc3RhcnQgdGhlIGdhbWUsIHJlbW92ZXMgdGhlIGluc3RydWN0aW9uIHBhZ2UgYW5kIHRoZW4gc2hvd3MgdGhlIHJhY2V0cmFjaywgZmVlZGJhY2sgYm94IGFuZCBjb250cm9sbGVyLlxuXG4gICRzdGFydC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgJCgnLmluc3RydWN0aW9ucycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCgnLmJvYXJkJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuY29udHJvbGxlcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJCgnLmZlZWRiYWNrJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkYXVkaW9UaGVtZS5wbGF5KCk7XG4gIH0pO1xuXG4gIC8vIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgcmVzZXQgYnV0dG9uLCBpdCBiYXNpY2FsbHkgaGlkZXMgYWxsIG9mIHRoZSBmZWVkYmFjayBmcm9tIHRoZSByZW1haW5pbmcgZ2FtZSBhbmQgbW92ZXMgYm90aCBwbGF5ZXIgaWNvbnMgYmFjayB0byB0aGUgc3RhcnQgbGluZSwgaXQgYWxzbyByZXNldHMgdGhlIHNhbHQgYW5kIGJvb3N0IGNvdW50ZXJzIHRvIDEgc28gdGhhdCB0aGV5IGNhbiBub3cgYmUgdXNlZCBhZ2Fpbi5cblxuICAkKCcucmVzZXQnKS5vbignY2xpY2snLCgpID0+IHtcbiAgICAkKCcudHJhY2sxJykucmVtb3ZlQ2xhc3MoJ3BsYXllciB3aW5uZXInKTtcbiAgICAkKCcuc3RhcnQxJykuYWRkQ2xhc3MoJ3BsYXllcicpO1xuICAgIFBsYXllck9uZUJvb3N0UmVtYWluaW5nID0gMTtcbiAgICBQbGF5ZXJPbmVTYWx0UmVtYWluaW5nID0xO1xuICAgICQoJy50cmFjazInKS5yZW1vdmVDbGFzcygncGxheWVyIHdpbm5lcicpO1xuICAgICQoJy5zdGFydDInKS5hZGRDbGFzcygncGxheWVyJyk7XG4gICAgUGxheWVyVHdvQm9vc3RSZW1haW5pbmcgPSAxO1xuICAgIFBsYXllclR3b1NhbHRSZW1haW5pbmcgPSAxO1xuICAgICQoJy5jb250cm9sbGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuZmVlZGJhY2snKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICQoJy5yZXN1bHRCb3gnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICQoJy5wbGF5ZXJPbmVXaW4nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICQoJy5wbGF5ZXJUd29XaW4nKS5hZGRDbGFzcygnaGlkZScpO1xuICB9KTtcbn0pO1xuIl19
